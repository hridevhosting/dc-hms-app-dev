import{C as Y,K as H,g as U}from"./chunk-A34WLQ27.js";import{b as q,d as j,e as $,l as O}from"./chunk-OCIRHO6A.js";import{b as f,c as W}from"./chunk-5JUHOLWQ.js";import"./chunk-3RSPD7AX.js";import{m as T,n as M,q as B,t as F,z as P}from"./chunk-N4ANQEKW.js";import{Db as p,Eb as a,Ma as m,Na as L,Ob as h,Pb as l,Q as E,Qb as g,Ub as x,V as v,Vb as D,Wb as C,Ya as k,ca as c,cb as b,da as d,fc as I,gc as A,nb as y,tb as r,ub as n,vb as _,wb as N,xb as V,zb as S}from"./chunk-ZPID5U3R.js";var u=class{constructor(){this.VendorId=-1,this.VendorName="",this.Address="",this.TelNo="",this.ContactName="",this.ContactNo="",this.Active=1,this.CreatedBy=0,this.CreatedAt="",this.VendorType="",this.VendorSubType="",this.Alias=""}};var z=(()=>{class s{constructor(e,i){this._httpClient=e,this._commonServices=i}getReferralDoctorList(){let i=this._commonServices.generateApiRequestParam(f.sqlFunNameList.select,null,`
     select * from LAB_Vendor where VendorType like 'REFERRER' and VendorName <> '' and VendorName like 'dr%' and Active = 1 order by VendorName asc;
    `);return this._httpClient.post(f.apiUrl+f.sqlController,i)}deleteReferralDetail(e){let i=`
     update LAB_Vendor set Active = 0 where VendorId = ${e} and Active = 1;
    `,t=this._commonServices.generateApiRequestParam(f.sqlFunNameList.select,null,i);return this._httpClient.post(f.apiUrl+f.sqlController,t)}saveReferralDoctorDetails(e){let i="";e.VendorId==-1&&(i=`
        declare @vendorId int
				set @vendorId = (select top 1 VendorId  from LAB_Vendor order by VendorId desc)
				set @vendorId  = @vendorId  + 1
				select @vendorId
        insert into LAB_Vendor (VendorId,VendorName,ContactNo,TelNo,Address,ContactName,Alias,CreatedBy,CreatedAt,VendorType,VendorSubType,Active)
				values (@vendorId,  N'${e.VendorName}', N'${e.ContactNo?e.ContactNo:""}', N'${e.TelNo?e.TelNo:""}', N'${e.Address}',N'${e.ContactName}', N'${e.Alias}', N'${e.CreatedBy?e.CreatedBy:this._commonServices.getCurrentSessionUserId()}', N'${this._commonServices.trasformDateTimeByFormat()}', 'REFERRER', 'REFERRER',1);
      `),e.VendorId>0&&(i=`
      update
			LAB_Vendor
		set
			VendorName = N'${e.VendorName}',
			ContactName = N'${e.ContactName}',
			Address = N'${e.Address}',
			ContactNo = N'${e.ContactNo}',
			TelNo = N'${e.TelNo}',
			Alias = N'${e.Alias}',
			Active = N'${e.Active}'
		where
			VendorId = ${e.VendorId}
      `);let t=this._commonServices.generateApiRequestParam(f.sqlFunNameList.select,null,i);return this._httpClient.post(f.apiUrl+f.sqlController,t)}static{this.\u0275fac=function(i){return new(i||s)(v(P),v(W))}}static{this.\u0275prov=E({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function Q(s,w){if(s&1){let e=S();N(0),r(1,"div",12)(2,"h3",13),l(3,"Referral Doctor"),n(),r(4,"div",14)(5,"button",15),p("click",function(){c(e);let t=a();return d(t.addNew())}),r(6,"strong"),l(7,"Add New"),n()(),r(8,"button",16),p("click",function(){c(e);let t=a();return t.showList=!0,d(t.filterReferralDoctorListByFilter())}),r(9,"strong"),l(10,"List"),n()()()(),r(11,"div",12)(12,"button",17),p("click",function(){c(e);let t=a();return d(t.previousReferralDoctor())}),_(13,"i",18),n(),r(14,"h5",19),l(15),n(),r(16,"button",20),p("click",function(){c(e);let t=a();return d(t.nextReferralDoctor())}),_(17,"i",21),n()(),r(18,"div",22)(19,"strong"),l(20,"Doctor Name"),n(),r(21,"input",23),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.VendorName,t)||(o.selectedReferralDoctorDetail.VendorName=t),d(t)}),n()(),r(22,"div",24)(23,"div",25)(24,"strong"),l(25,"Contact No"),n(),r(26,"input",26),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.ContactNo,t)||(o.selectedReferralDoctorDetail.ContactNo=t),d(t)}),n()(),r(27,"div",25)(28,"strong"),l(29,"WhatsApp No"),n(),r(30,"input",27),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.TelNo,t)||(o.selectedReferralDoctorDetail.TelNo=t),d(t)}),n()()(),r(31,"div",22)(32,"strong"),l(33,"Address"),n(),r(34,"textarea",28),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.Address,t)||(o.selectedReferralDoctorDetail.Address=t),d(t)}),n()(),r(35,"div",24)(36,"div",25)(37,"strong"),l(38,"Contact Name"),n(),r(39,"input",26),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.ContactName,t)||(o.selectedReferralDoctorDetail.ContactName=t),d(t)}),n()(),r(40,"div",25)(41,"strong"),l(42,"Alias"),n(),r(43,"input",27),C("ngModelChange",function(t){c(e);let o=a();return D(o.selectedReferralDoctorDetail.Alias,t)||(o.selectedReferralDoctorDetail.Alias=t),d(t)}),n()()(),r(44,"div",29)(45,"button",30),p("click",function(){c(e);let t=a();return d(t.saveReferralDoctorDetail())}),l(46," Save Details "),n()(),V()}if(s&2){let e=a();m(15),g(e.selectedReferralDoctorDetail.VendorName?e.selectedReferralDoctorDetail.VendorName:"Referral Doctor"),m(6),x("ngModel",e.selectedReferralDoctorDetail.VendorName),m(5),x("ngModel",e.selectedReferralDoctorDetail.ContactNo),m(4),x("ngModel",e.selectedReferralDoctorDetail.TelNo),m(4),x("ngModel",e.selectedReferralDoctorDetail.Address),m(5),x("ngModel",e.selectedReferralDoctorDetail.ContactName),m(4),x("ngModel",e.selectedReferralDoctorDetail.Alias)}}function X(s,w){if(s&1){let e=S();r(0,"tr")(1,"td"),l(2),n(),r(3,"td"),l(4),I(5,"uppercase"),n(),r(6,"td"),l(7),n(),r(8,"td"),l(9),n(),r(10,"td"),l(11),n(),r(12,"td",14)(13,"button",40),p("click",function(){let t=c(e).$implicit,o=a(2);return d(o.setSelectedReferralDoctorDetail(t,o.index))}),_(14,"i",41),n(),r(15,"button",42),p("click",function(t){let o=c(e).$implicit,R=a(2),G=h(8);return R.selectedReferralDetailId=o.VendorId,d(G.toggle(t))}),_(16,"i",43),n()()()}if(s&2){let e=w.$implicit,i=w.index;m(2),g(i+1),m(2),g(A(5,5,e.VendorName)),m(3),g(e.ContactNo),m(2),g(e.TelNo),m(2),g(e.Address)}}function Z(s,w){if(s&1){let e=S();N(0,31),r(1,"div",32)(2,"h4"),l(3,"Referral Doctor List"),n(),r(4,"button",15),p("click",function(){c(e);let t=a();return t.showList=!1,d(t.addNew())}),r(5,"strong"),l(6,"Add New"),n()()(),r(7,"table",33)(8,"thead",34)(9,"tr")(10,"th"),l(11,"#"),n(),r(12,"th"),l(13,"Doctor Name"),n(),r(14,"th"),l(15,"Contact No"),n(),r(16,"th"),l(17,"WhatsApp No"),n(),r(18,"th"),l(19,"Address"),n(),r(20,"th"),l(21,"Actions"),n()(),r(22,"tr",31)(23,"th"),l(24,"#"),n(),r(25,"th")(26,"input",35,2),p("keyup",function(){c(e);let t=h(27),o=a();return d(o.filterReferralDoctorListByFilter(t.value,"VendorName"))}),n()(),r(28,"th")(29,"input",36,3),p("keyup",function(){c(e);let t=h(30),o=a();return d(o.filterReferralDoctorListByFilter(t.value,"ContactNo"))}),n()(),r(31,"th")(32,"input",37,4),p("keyup",function(){c(e);let t=h(33),o=a();return d(o.filterReferralDoctorListByFilter(t.value,"TelNo"))}),n()(),r(34,"th")(35,"input",38,5),p("keyup",function(){c(e);let t=h(36),o=a();return d(o.filterReferralDoctorListByFilter(t.value,"Address"))}),n()(),_(37,"th"),n()(),r(38,"tbody"),b(39,X,17,7,"tr",39),n()(),V()}if(s&2){let e=a();m(39),y("ngForOf",e.filteredReferralDoctorList)}}function ee(s,w){if(s&1){let e=S();N(0),r(1,"div",44)(2,"strong"),l(3,"Are you sure? You like to delete this detail!"),n(),r(4,"div",45),p("click",function(){c(e);let t=a();return d(t.deleteReferralDetail())}),r(5,"button",46)(6,"strong"),l(7,"Yes"),n()(),r(8,"button",47),p("click",function(){c(e),a();let t=h(6);return d(t.click())}),r(9,"strong"),l(10,"No"),n()()()(),V()}}var fe=(()=>{class s{constructor(e){this._settingServices=e,this.referralDoctorList=[],this.index=0,this.showList=!1,this.selectedReferralDoctorDetail=new u,this.filteredReferralDoctorList=[],this.selectedReferralDetailId=0}ngOnInit(){this.loadReferralDoctorList()}loadReferralDoctorList(){this._settingServices.getReferralDoctorList().subscribe(e=>{console.log("getReferralDoctorList",e),e.Status.toLowerCase().includes("success")&&e.noofREcords&&(this.referralDoctorList=[],this.referralDoctorList=e.dataSet.Table,this.selectedReferralDoctorDetail=this.referralDoctorList[0],this.filterReferralDoctorListByFilter())},e=>{console.error(e),alert("Please check log, for more details")})}nextReferralDoctor(){this.selectedReferralDoctorDetail=new u,this.index!=this.referralDoctorList.length-1?this.index=this.index+1:this.index=0,this.selectedReferralDoctorDetail=this.referralDoctorList[this.index]}previousReferralDoctor(){this.selectedReferralDoctorDetail=new u,this.index!=0?this.index=this.index-1:this.index=this.referralDoctorList.length-1,this.selectedReferralDoctorDetail=this.referralDoctorList[this.index]}setSelectedReferralDoctorDetail(e,i){this.selectedReferralDoctorDetail=new u,this.selectedReferralDoctorDetail=e,this.index=i,this.showList=!1}filterReferralDoctorListByFilter(e,i){let t=[];if(e&&this.referralDoctorList.length&&i){for(let o=0;o<this.referralDoctorList.length;o++){let R=null;R=this.referralDoctorList[o],i!=null&&R[i.toString()]&&R[i.toString()].toLowerCase().includes(e.toLowerCase())&&t.push(R)}this.filteredReferralDoctorList=t}else this.filteredReferralDoctorList=this.referralDoctorList}saveReferralDoctorDetail(){debugger;this._settingServices.saveReferralDoctorDetails(this.selectedReferralDoctorDetail).subscribe(e=>{console.log(e),e.Status.toLowerCase().includes("success")&&(this.loadReferralDoctorList(),this.setSelectedReferralDoctorDetail(this.referralDoctorList[0],0))},e=>{console.error(e)})}addNew(){this.selectedReferralDoctorDetail=new u}deleteReferralDetail(){this.selectedReferralDetailId?this._settingServices.deleteReferralDetail(this.selectedReferralDetailId).subscribe(e=>{console.log(e),e.Status.toLowerCase().includes("success")&&(this.loadReferralDoctorList(),this.setSelectedReferralDoctorDetail(this.referralDoctorList[0],0),document.getElementById("hide")?.click()),e.Status.toLowerCase().includes("failed")&&(this.loadReferralDoctorList(),this.setSelectedReferralDoctorDetail(this.referralDoctorList[0],0),document.getElementById("hide")?.click())},e=>{console.error(e),alert("Please try again, Check! ")}):alert("Please try again!")}static{this.\u0275fac=function(i){return new(i||s)(L(z))}}static{this.\u0275cmp=k({type:s,selectors:[["app-referral-doctor"]],decls:10,vars:3,consts:[["hide",""],["op",""],["docNameInput",""],["contInput",""],["whatsAppInput",""],["addressInput",""],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","90vh"],[1,"card","border-0","rounded-3","shadow-lg","p-3","gap-1",2,"min-width","50% !important","max-height","60vh !important","overflow-y","auto"],[1,"d-flex","flex-row"],[4,"ngIf"],["class","",4,"ngIf"],["id","hide"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[1,"h3","p-0","m-0"],[1,"d-flex","flex-row","gap-2"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","pTooltip","Previous Doctor","tooltipPosition","bottom",1,"btn","btn-lg","bg-transparent",3,"click"],[1,"bi","bi-arrow-left-circle-fill"],[1,"h5","p-0","m-0"],["type","button","pTooltip","Next Doctor","tooltipPosition","bottom",1,"btn","btn-lg","bg-transparent",3,"click"],[1,"bi","bi-arrow-right-circle-fill"],[1,"d-flex","flex-column"],["type","text","placeholder","Enter doctor name here...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","flex-row","w-100","gap-1"],[1,"d-flex","flex-column","w-50"],["type","text","placeholder","Enter contact no here...",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter whatsapp no here...",1,"form-control",3,"ngModelChange","ngModel"],["type","text","rows","3","placeholder","Enter contact no here...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","flex-column","text-end","mt-3"],["type","button",1,"btn","btn-success","shadow-lg","w-20",3,"click"],[1,""],[1,"d-flex","justify-content-between","align-items-center"],[1,"table","table-bordered",2,"position","relative"],[2,"position","sticky","top","0","background-color","white"],["type","text","placeholder","Search doctor name",1,"form-control","form-control-sm",3,"keyup"],["type","text","placeholder","Search contact no",1,"form-control","form-control-sm",3,"keyup"],["type","text","placeholder","Search whatsapp no",1,"form-control","form-control-sm",3,"keyup"],["type","text","placeholder","Search address",1,"form-control","form-control-sm",3,"keyup"],[4,"ngFor","ngForOf"],["type","button","pTooltip","Edit Detail","tooltipPosition","bottom",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil-square"],["type","button","pTooltip","Delete Detail","tooltipPosition","bottom",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"d-flex","flex-column","gap-1"],["type","button",1,"d-flex","justify-content-end","gap-2",3,"click"],[1,"btn","btn-sm","btn-success"],["type","submit",1,"btn","btn-sm","btn-danger",3,"click"]],template:function(i,t){i&1&&(r(0,"div",6)(1,"div",7),_(2,"div",8),b(3,Q,47,7,"ng-container",9)(4,Z,40,1,"ng-container",10),_(5,"div",11,0),n()(),r(7,"p-overlayPanel",null,1),b(9,ee,11,0,"ng-container",9),n()),i&2&&(m(3),y("ngIf",!t.showList),m(),y("ngIf",t.showList&&t.referralDoctorList.length),m(5),y("ngIf",t.selectedReferralDetailId))},dependencies:[H,T,M,U,Y,B,F,O,q,j,$],encapsulation:2})}}return s})();export{fe as ReferralDoctorComponent};
