import{a as K}from"./chunk-5RFON5EB.js";import{a as $,b as U,c as H}from"./chunk-YXE53BZZ.js";import{a as G,b as J}from"./chunk-T7M7Z6SU.js";import{a as q}from"./chunk-EXF3M4J6.js";import{l as V}from"./chunk-OCIRHO6A.js";import{a as E,c as j}from"./chunk-6XXP7TRA.js";import{e as F}from"./chunk-3RSPD7AX.js";import{m as T,n as N,q as O,r as z,t as k}from"./chunk-N4ANQEKW.js";import{Db as D,Eb as c,Ia as M,Ib as L,Ma as a,Na as v,Pb as r,Qb as _,Rb as I,Sb as S,Ya as B,ca as y,cb as d,da as C,fc as h,gc as f,hc as R,nb as m,qb as w,sb as A,tb as n,ub as o,vb as g,wb as x,xb as u,zb as P}from"./chunk-ZPID5U3R.js";function Y(i,s){if(i&1&&(n(0,"h5",23),r(1),h(2,"uppercase"),o()),i&2){let e=c(2);a(),_(f(2,1,e.billDetail.IPCaseNo))}}function Z(i,s){if(i&1&&(n(0,"div",24)(1,"strong",12),r(2,"Date :"),o(),n(3,"label",13),r(4),h(5,"date"),o()()),i&2){let e=c(3);a(4),_(R(5,1,e.caseDetail.ArrivedAt,"dd/MMM/yyyy"))}}function ee(i,s){if(i&1&&(n(0,"div",6)(1,"h5",7),r(2,"Appointment Details"),o(),n(3,"div",8)(4,"div",24)(5,"strong",10),r(6,"Case No :"),o(),n(7,"label",11),r(8),h(9,"uppercase"),o()(),d(10,Z,6,4,"div",25),n(11,"div",9)(12,"strong",12),r(13,"Consultant"),o(),n(14,"label",13),r(15),h(16,"uppercase"),o()()()()),i&2){let e=c(2);a(8),_(f(9,3,e.caseDetail.RegNo)),a(2),m("ngIf",e.caseDetail.ArrivedAt),a(5),_(f(16,5,e.caseDetail.BookedFor))}}function te(i,s){i&1&&g(0,"i",34)}function ie(i,s){i&1&&g(0,"i",35)}function ne(i,s){if(i&1&&(n(0,"strong",42)(1,"i"),r(2),o()()),i&2){let e=c().$implicit;a(2),_(e.PathName)}}function ae(i,s){i&1&&g(0,"hr",43)}function oe(i,s){if(i&1&&(x(0),n(1,"div",36),d(2,ne,3,1,"strong",37),n(3,"div",38)(4,"strong",39),r(5,"Result :"),o(),n(6,"span",40)(7,"strong"),r(8),o()()(),n(9,"div",38)(10,"strong"),r(11," Range : "),o(),n(12,"i")(13,"u"),r(14),o()()()(),d(15,ae,1,0,"hr",41),u()),i&2){let e=s.$implicit,t=s.index,l=c(2).$implicit,p=c(2);a(2),m("ngIf",!e.PathName.includes("_")),a(6),S(" ",p.replaceString(e.Result)," ",p.replaceString(e.Result)?e.Unit:""," "),a(6),S(" ",e.range," ",e.Unit," "),a(),m("ngIf",t+1!==l.testDataArray.length)}}function re(i,s){if(i&1&&(x(0),d(1,oe,16,6,"ng-container",22),u()),i&2){let e=c().$implicit;a(),m("ngForOf",e.testDataArray)}}function le(i,s){if(i&1){let e=P();x(0),n(1,"div",26)(2,"div",27)(3,"div",28),g(4,"img",29),n(5,"strong",30),r(6),h(7,"uppercase"),o()(),n(8,"button",31),D("click",function(){let l=y(e).$implicit;return C(l.isOpened=!l.isOpened)}),d(9,te,1,0,"i",32)(10,ie,1,0,"i",33),o()(),d(11,re,2,1,"ng-container",0),o(),u()}if(i&2){let e=s.$implicit,t=c(2);a(2),w("background-color:"+t.changeBgColor(e.isOpened)+";"),a(4),I(" ",f(7,6,e.testName)," "),a(3),m("ngIf",!e.isOpened),a(),m("ngIf",e.isOpened),a(),m("ngIf",e.isOpened&&e.testDataArray.length)}}function se(i,s){if(i&1){let e=P();x(0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,Y,3,3,"h5",5),o(),n(6,"div",6)(7,"h5",7),r(8,"Patient Details"),o(),n(9,"div",8)(10,"div",9)(11,"strong",10),r(12,"Name"),o(),n(13,"label",11),r(14),h(15,"uppercase"),o()(),n(16,"div",9)(17,"strong",12),r(18,"UHID No"),o(),n(19,"label",13),r(20),h(21,"uppercase"),o()(),n(22,"div",9)(23,"strong",12),r(24,"Contact No"),o(),n(25,"label",13),r(26),o()(),n(27,"div",14)(28,"div",15)(29,"strong",10),r(30,"Age"),o(),n(31,"label",11),r(32),o()(),n(33,"div",16)(34,"strong",10),r(35,"Gender"),o(),n(36,"label",11),r(37),o()(),n(38,"div",16)(39,"strong",10),r(40,"Category"),o(),n(41,"label",11),r(42),o()()()()(),d(43,ee,17,7,"div",17),o(),n(44,"div",18)(45,"div",19)(46,"div",20)(47,"button",21),D("click",function(){y(e);let l=c();return C(l.minimizeMaximizeAll())}),n(48,"strong"),r(49),o()()(),d(50,le,12,8,"ng-container",22),o()()()(),u()}if(i&2){let e=c();a(5),m("ngIf",e.billDetail.IPCaseNo),a(9),S("",e.patientDetails.Salutation," ",f(15,14,e.patientDetails.EntityName),""),a(6),_(f(21,16,e.patientDetails.RegNo)),a(6),_(e.patientDetails.PrimaryFld1),a(6),_(e.patientDetails.PrimaryId1),a(5),_(e.patientDetails.PrimaryFld2),a(5),_(e.patientDetails.ExternalCategory),a(),m("ngIf",e.caseDetail),a(4),A("btn btn-sm ",e.isMinimizeAll?"btn-primary":"btn-danger",""),a(2),I("",e.isMinimizeAll?"Expand":"Minimize"," All"),a(),m("ngForOf",e.pathReportItemList)}}function pe(i,s){if(i&1&&(n(0,"div",47)(1,"div",9)(2,"div",38),g(3,"img",48),n(4,"strong"),r(5),o()(),n(6,"div",49)(7,"i"),r(8),h(9,"uppercase"),h(10,"uppercase"),n(11,"a",50),r(12),o(),r(13),o()()(),g(14,"img",51),o()),i&2){let e=c(2);a(5),I(" ",e.patientDetails.EntityName," "),a(3),S(" ",f(9,7,e.patientDetails.PrimaryFld2)," | ",f(10,9,e.patientDetails.PrimaryId1)," | "),a(3),L("href","tel:+91",e.patientDetails.PrimaryFld1,"",M),a(),_(e.patientDetails.PrimaryFld1||""),a(),I(" | ",e.patientDetails.ExternalCategory," ")}}function me(i,s){i&1&&g(0,"i",34)}function ce(i,s){i&1&&g(0,"i",35)}function de(i,s){if(i&1&&(n(0,"strong",42)(1,"i"),r(2),o()()),i&2){let e=c().$implicit;a(2),_(e.PathName)}}function _e(i,s){i&1&&g(0,"hr",43)}function ge(i,s){if(i&1&&(x(0),n(1,"div",36),d(2,de,3,1,"strong",37),n(3,"div",38)(4,"strong"),r(5," Range : "),o(),n(6,"i")(7,"u")(8,"strong"),r(9),o()()()(),n(10,"div",9)(11,"strong"),r(12,"Result :"),o(),n(13,"span",40),r(14),o()()(),d(15,_e,1,0,"hr",41),u()),i&2){let e=s.$implicit,t=s.index,l=c(2).$implicit,p=c(2);a(2),m("ngIf",!e.PathName.includes("_")),a(7),S(" ",e.range," ",e.Unit," "),a(5),S(" ",p.replaceString(e.Result)," ",p.replaceString(e.Result)?e.Unit:""," "),a(),m("ngIf",t+1!==l.testDataArray.length)}}function he(i,s){if(i&1&&(x(0),d(1,ge,16,6,"ng-container",22),u()),i&2){let e=c().$implicit;a(),m("ngForOf",e.testDataArray)}}function fe(i,s){if(i&1){let e=P();x(0),n(1,"div",26)(2,"div",27)(3,"div",28),g(4,"img",29),n(5,"strong",30),r(6),h(7,"uppercase"),o()(),n(8,"button",31),D("click",function(){let l=y(e).$implicit;return C(l.isOpened=!l.isOpened)}),d(9,me,1,0,"i",32)(10,ce,1,0,"i",33),o()(),d(11,he,2,1,"ng-container",0),o(),u()}if(i&2){let e=s.$implicit,t=c(2);a(2),w("background-color:"+t.changeBgColor(e.isOpened)+";"),a(4),I(" ",f(7,6,e.testName)," "),a(3),m("ngIf",!e.isOpened),a(),m("ngIf",e.isOpened),a(),m("ngIf",e.isOpened&&e.testDataArray.length)}}function xe(i,s){if(i&1){let e=P();x(0),n(1,"div",44),d(2,pe,15,11,"div",45),o(),n(3,"div",20)(4,"button",21),D("click",function(){y(e);let l=c();return C(l.minimizeMaximizeAll())}),n(5,"strong"),r(6),o()()(),n(7,"div",46),d(8,fe,12,8,"ng-container",22),o(),u()}if(i&2){let e=c();a(2),m("ngIf",e.patientDetails),a(2),A("btn btn-sm ",e.isMinimizeAll?"btn-primary":"btn-danger",""),a(2),I("",e.isMinimizeAll?"Expand":"Minimize"," All"),a(2),m("ngForOf",e.pathReportItemList)}}var b=class{constructor(){this.testName="",this.isOpened=!0,this.testDataArray=[]}},Le=(()=>{class i{constructor(e,t,l,p,Q,W,X){this._activeRoute=e,this._pathManagementServices=t,this._patientManagementServices=l,this._billManagementService=p,this._commonServices=Q,this._admissionServices=W,this._appointmentServices=X,this.patientId=0,this.pathAppId=0,this.pathLabId="",this.patientDetails=new U,this.pathReportItemList=[],this.billDetail=new $,this.billList=[],this.caseDetail=null,this.isMinimizeAll=!1}ngOnInit(){let e=window.document.location.href||"";e&&(e.includes("ipd")&&(e="IPD"),e.includes("opd")&&(e="OPD"),E.hospitalSection=e),this._commonServices.setHospitalSection(e+(e?" > ":"")+"Path Report Summary"),this._activeRoute.queryParams.subscribe(t=>{console.log(t),this.patientId=Number(t.patientId),this.pathAppId=Number(t.pathAppId),this.pathLabId=t.pathLabId,this.patientId&&(this.loadPatientDetailsByPatientId(),this.loadBillListByPatientHospitalSection(this.patientId,this.pathAppId,"Path"),this.loadCaseDetail())})}loadPatientDetailsByPatientId(){this._patientManagementServices.getPatientDetailsByPatientId(this.patientId).subscribe(e=>{console.log(e),e.Status.toLowerCase()==="success"&&e.noofREcords&&(this.patientDetails=e.dataSet.Table[0],this.loadPathReportItemList())},e=>{console.error(e)})}loadPathReportItemList(){let e={AppointmentId:this.pathAppId,PathLabId:this.pathLabId};this._pathManagementServices.getPathReportItemListByPathReportDetail(e,this.patientDetails).subscribe(t=>{if(console.log(t),t.Status.toLowerCase()==="success"&&t.noofREcords){let l=t.dataSet.Table;this.sortReportItemList(l),console.log(l)}},t=>{console.error(t)})}loadBillListByPatientHospitalSection(e,t,l){this._billManagementService.getBillListByPatientAndAppointmentId(e,t,l).subscribe(p=>{console.log(p),p.Status.toLowerCase()==="success"&&p.noofREcords&&(this.billList=p.dataSet.Table,this.sortCurrentBillDetailByPathAppId())},p=>{console.error(p),alert("Please check log, for more details")})}loadCaseDetail(){debugger;E.hospitalSection&&(E.hospitalSection.toLowerCase()==="ipd"&&this.loadAdmissionDetailByAdmissionIdPatientId(),E.hospitalSection.toLowerCase()==="opd"&&this.loadAppointmentDetailByAppointmentIdPatientId())}loadAppointmentDetailByAppointmentIdPatientId(){this._appointmentServices.getAppointmentDetailsByAppointmentIdPatientId(this.pathAppId,this.patientId).subscribe(e=>{console.log(e),e.Status.toLowerCase()==="success"&&e.noofREcords&&(this.caseDetail=null,this.caseDetail=e.dataSet.Table[0],console.log(this.caseDetail))},e=>{console.error(e),alert("Please check log, for more detail.")})}loadAdmissionDetailByAdmissionIdPatientId(){debugger;this._admissionServices.getAddmissionDetailsByAdmissionIdPatientId(this.pathAppId,this.patientId).subscribe(e=>{console.log(e),e.Status.toLowerCase()==="success"&&e.noofREcords&&(this.caseDetail=null,this.caseDetail=e.dataSet.Table[0],console.log(this.caseDetail))},e=>{console.error(e),alert("Please check log, for more detail.")})}sortCurrentBillDetailByPathAppId(){this.billList.length&&(this.billList.forEach(e=>{e.AppointmentId===this.pathAppId&&(this.billDetail=e)}),console.log(this.billDetail))}sortReportItemList(e){let t=new b;this.pathReportItemList=[],e.forEach(l=>{debugger;let p=l.tests||"";if(p==="Sr. Potassium")debugger;p&&(t.testName||(t.testName=p),this.pathReportItemList.length?t.testName&&(t.testName===p?t.testDataArray.push(l):t.testName!==p?(this.pathReportItemList.push(t),t=new b,t.testName=p,t.testDataArray.push(l)):t.testDataArray.length&&(this.pathReportItemList.push(t),t=new b)):t.testName&&!t.testDataArray.length?t.testDataArray.push(l):t.testName&&(t.testName===p?t.testDataArray.push(l):t.testName!==p?(this.pathReportItemList.push(t),t=new b,t.testName=p,t.testDataArray.push(l)):t.testDataArray.length&&(this.pathReportItemList.push(t),t=new b)))}),this.pathReportItemList.push(t),console.log(this.pathReportItemList)}changeBgColor(e){return e?"#FF8A8A":"#03AED2"}minimizeMaximizeAll(){this.pathReportItemList.forEach(e=>{e.isOpened=this.isMinimizeAll}),this.isMinimizeAll=!this.isMinimizeAll}validPlatform(e){return this._commonServices.checkPlatform(e)}replaceString(e){let t="";return e&&(e.includes("<B>")?t=e.replaceAll("<B>",""):t=e),t}static{this.\u0275fac=function(t){return new(t||i)(v(F),v(K),v(q),v(H),v(j),v(J),v(G))}}static{this.\u0275cmp=B({type:i,selectors:[["app-path-management"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container-fluid"],[1,"d-flex","flex-row","p-1"],[1,"d-flex","flex-column","gap-2",2,"width","20vw"],[1,"d-flex","card","shadow-lg","rounded-3","p-2","justify-content-between","align-items-center"],["class","p-0 m-0",4,"ngIf"],[1,"d-flex","flex-column","card","shadow-lg","rounded-3"],[1,"pl-2","pt-2","pb-2","text-white","bg-primary","rounded-top-3"],[1,"p-2","pt-0"],[1,"d-flex","flex-column"],["name","p_name"],["for","p_name"],["name","p_uhidno"],["for","p_uhidno"],[1,"d-flex","flex-row","justify-content-between"],[1,"d-flex","flex-column","text-start"],[1,"d-flex","flex-column","text-center"],["class","d-flex flex-column card shadow-lg rounded-3",4,"ngIf"],[2,"width","80vw"],[1,"p-2",2,"overflow-y","auto","max-height","95dvh"],[1,"d-flex","justify-content-end","p-1"],["type","button",3,"click"],[4,"ngFor","ngForOf"],[1,"p-0","m-0"],[1,"d-flex","flex-row","gap-1"],["class","d-flex flex-row gap-1",4,"ngIf"],[1,"card","rounded-3","shadow-lg","mb-1","p-1"],[1,"d-flex","justify-content-between","align-items-center","rounded-3"],[1,"d-flex","flex-wrap","align-items-center","gap-2"],["src","assets/images/centrifuge.png","height","30px","alt","","srcset","",1,"pl-2"],[1,"text-white",2,"font-size","1.3rem"],["type","button",1,"btn","btn-sm","bg-transparent",3,"click"],["style","font-size: 1.1rem;","class","bi bi-chevron-down text-white",4,"ngIf"],["style","font-size: 1.1rem;","class","bi bi-x-lg text-white",4,"ngIf"],[1,"bi","bi-chevron-down","text-white",2,"font-size","1.1rem"],[1,"bi","bi-x-lg","text-white",2,"font-size","1.1rem"],[1,"d-flex","flex-column","w-100","p-2"],["style","font-size: 1.1rem;",4,"ngIf"],[1,"d-flex","flex-row","gap-2"],[1,"text-nowrap"],[1,"w-100","text-wrap"],["class","m-0 p-0",4,"ngIf"],[2,"font-size","1.1rem"],[1,"m-0","p-0"],[1,"card","border-0","rounded-3","shadow-lg","p-2"],["class","d-flex flex-row justify-content-between gap-2",4,"ngIf"],[1,"p-2",2,"overflow-y","auto","max-height","80dvh"],[1,"d-flex","flex-row","justify-content-between","gap-2"],["src","assets/images/people.png","height","25px","alt","","srcset",""],[1,"d-flex","flex-wrap"],[3,"href"],["src","assets/images/laboratory-testing.png","height","50px","alt","","srcset",""]],template:function(t,l){t&1&&d(0,se,51,18,"ng-container",0)(1,xe,9,6,"ng-container",0),t&2&&(m("ngIf",l.validPlatform("mac")||l.validPlatform("window")),a(),m("ngIf",l.validPlatform("iphone")||l.validPlatform("ipad")||l.validPlatform("andriod")))},dependencies:[k,T,N,O,z,V],encapsulation:2})}}return i})();export{Le as PathManagementComponent};
