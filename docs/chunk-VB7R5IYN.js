import{a as D}from"./chunk-J6ZVA5VK.js";import{b as F,d as E,e as U,f as H,j as V,k as O,l as j}from"./chunk-OCIRHO6A.js";import{c as P}from"./chunk-6XXP7TRA.js";import{z as I}from"./chunk-N4ANQEKW.js";import{Db as y,Ma as f,Na as h,Ob as N,Pb as p,Q as w,Ub as x,V as A,Vb as C,Wb as W,Ya as M,ac as T,ca as m,da as g,qb as S,tb as o,ub as n,vb as u,wb as b,xb as v,zb as _}from"./chunk-ZPID5U3R.js";var l=class{constructor(d){this.WhatsAppId=0,this.SchDate="",this.WhatsAppType="",this.MobileNo="",this.WhatsAppText="",this.FilePath="",this.Sent="",this.Active=1,this.SentAt="",this.EntityId=0,this.AppointmentId=0,this.IsSync=0,this.PersonName="",this.url="",this.response="",this.noOfAttempt=0,this.tableName="",this.id=0,this.WhatsAppType=d.toUpperCase()}};var c={whatAppURL:"https://api.botmastersender.com/api/v2/?action=send",senderId:"91",authToken:""};var k=(()=>{class s{constructor(t){this._httpServices=t,this._formData=new FormData}setFormData(t,e,i){let r=new FormData;return r.append("senderId=",c.senderId),r.append("authToken=",c.authToken),r.append("messageText=",t),r.append("receiverId=",e),r.append("uploadFile=@",i||""),r}sendNotification(t,e,i){let r=this.setFormData(t,e,i||"");return this._httpServices.post(c.whatAppURL,r)}static{this.\u0275fac=function(e){return new(e||s)(A(I))}}static{this.\u0275prov=w({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Y=(s,d,t,e)=>({"min-width":s,"max-width":d,"min-height":t,"max-height":e}),ee=(()=>{class s{constructor(t,e,i){this._whatsAppServices=t,this._commonServices=e,this._userServices=i,this.screenHW={height:"",width:""},this.whatsAppAlertMsg=new l("reset_pwd_otp")}ngOnInit(){this.screenHW.height=window.innerHeight.toString(),this.screenHW.width=window.innerWidth.toString(),console.log(this.screenHW)}resetWhatsAppVar(){this.whatsAppAlertMsg=new l("reset_pwd_otp"),this.whatsAppAlertMsg.AppointmentId=-1,this.whatsAppAlertMsg.EntityId=-1}loadUserDetailByContactNo(t){this._userServices.getUserDetailByContactNo(t).subscribe(e=>{e.Status.toLowerCase().trim().includes("success")&&e.noofREcords&&(this.whatsAppAlertMsg.id=e.dataSet.Table[0].UserId||0,this.whatsAppAlertMsg.tableName="tblUser, Emp_Master",this.whatsAppAlertMsg.PersonName=(e.dataSet.Table[0].UserName||"").toUpperCase(),this.whatsAppAlertMsg.id&&this.whatsAppAlertMsg.PersonName?this.sendWhatAppOTP_UserWhatsAppNumber():alert("Please enter correct contact number."))},e=>{console.error(e)})}sendWhatAppOTP_UserWhatsAppNumber(){this.whatsAppAlertMsg.AppointmentId=this._commonServices.generateOTP(),this.whatsAppAlertMsg.WhatsAppText=`
      Hello, ''.
      %0a %0a
      %0a %0a
      Your requested OTP is as follow,
      %0a %0a
      **.
      %0a %0a
      %0a %0a
      Valid for only 5min.
      %0a %0a
      %0a %0a
      *!IMPORTANT!*
      %0a %0a
      _*Please do not share any personal infomation to anyone, Your personal infomation is your responsibility.*_
    `,this.whatsAppAlertMsg.MobileNo=this.whatsAppAlertMsg.MobileNo.toString(),this.whatsAppAlertMsg.SchDate=this._commonServices.trasformDateTimeByFormat()||"",this._whatsAppServices.sendNotification(this.whatsAppAlertMsg.WhatsAppText,this.whatsAppAlertMsg.MobileNo).subscribe(t=>{console.log(t)},t=>{console.error(t)});debugger}static{this.\u0275fac=function(e){return new(e||s)(h(k),h(P),h(D))}}static{this.\u0275cmp=M({type:s,selectors:[["app-forget-password"]],decls:22,vars:8,consts:[["userContactNo",""],[1,"d-flex","justify-content-center","align-items-center","h-100"],[1,"card","border-0","shadow-lg","p-3"],[1,"d-flex","flex-row","gap-1"],[1,"p-5"],["src","assets/images/reset-password-image.gif","height","250px","width","250px","alt","","srcset",""],[1,""],[1,"text-center"],[1,"d-flex","flex-column","align-content-between","gap-4","p-2","h-100"],[1,"d-flex","flex-column","mt-5"],[1,"d-flex","flex-row","gap-2"],["type","text","placeholder","Enter your contact no","value","+91","disabled","",1,"form-control",2,"width","20% !important"],["type","number","placeholder","Enter your contact no","minlength","10","maxlength","10",1,"form-control",2,"width","80% !important",3,"ngModelChange","ngModel"],[2,"color","red"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,i){if(e&1){let r=_();o(0,"div",1),b(1),o(2,"div",2)(3,"div",3)(4,"div",4),u(5,"img",5),n(),o(6,"div",6)(7,"div",7)(8,"h3"),p(9,"Reset Password"),n()(),o(10,"div",8)(11,"div",9)(12,"strong"),p(13,"Registered Contact No?"),n(),o(14,"div",10),u(15,"input",11),o(16,"input",12,0),W("ngModelChange",function(a){return m(r),C(i.whatsAppAlertMsg.MobileNo,a)||(i.whatsAppAlertMsg.MobileNo=a),g(a)}),n()(),o(18,"small",13),p(19," Only enter registered contact no, for OTP authentication. "),n()(),o(20,"button",14),y("click",function(){m(r);let a=N(17);return g(i.loadUserDetailByContactNo(a.value.toString()))}),p(21," Send OTP "),n()()()()(),v(),n()}e&2&&(S(T(3,Y,i.screenHW.width+"px",i.screenHW.width+"px",i.screenHW.height+"px",i.screenHW.height+"px")),f(16),x("ngModel",i.whatsAppAlertMsg.MobileNo))},dependencies:[j,F,H,E,V,O,U],encapsulation:2})}}return s})();export{ee as ForgetPasswordComponent};
