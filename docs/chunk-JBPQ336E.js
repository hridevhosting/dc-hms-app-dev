import{a as rt}from"./chunk-P7HVST77.js";import{a as at}from"./chunk-BYYSXB2N.js";import{a as ot}from"./chunk-XFGMMR5A.js";import{A as M,C as et,F as it,G as nt,K as F,a as z,c as tt,t as k}from"./chunk-A34WLQ27.js";import{b as H,d as X,e as Y,h as J,i as Z,l as N}from"./chunk-OCIRHO6A.js";import{a as A,b as g,c as b}from"./chunk-5JUHOLWQ.js";import{m as E,n as Q,q as K,t as T,z as G}from"./chunk-N4ANQEKW.js";import{Db as L,Eb as y,Lb as q,Ma as l,Mb as $,Na as d,Nb as W,Pb as s,Q as B,Qb as S,Rb as D,Ub as O,V as R,Vb as j,Wb as U,Ya as w,ba as V,ca as C,cb as u,da as v,fc as I,gc as x,nb as m,tb as i,ub as n,vb as h,zb as P}from"./chunk-ZPID5U3R.js";var pt=(()=>{class r{constructor(t,o){this._httpClient=t,this._commonService=o}getAttributeSet(){let t=null;A.hospitalSection?t=A.hospitalSection.toUpperCase():history.state.hospitalSection?t=history.state.hospitalSection.toUpperCase():t="",t=t.toLowerCase()==="ipd"?"OT":t;let o=`EXEC usp_AttributeSet_GetForSingle '${t}'`,e=this._commonService.generateApiRequestParam(g.sqlFunNameList.select,null,o);return this._httpClient.post(g.apiUrl+g.sqlController,e)}saveAttributeSet(t,o){let e=null;A.hospitalSection?e=A.hospitalSection.toUpperCase():history.state.hospitalSection?e=history.state.hospitalSection.toUpperCase():e="",e=e.toLowerCase()==="ipd"?"OT":e;let a=`execute nik_Appointment_Attribute_CopyUnUsed_V1 ${t}, N'${e}', N'${o||""}', ${this._commonService.getCurrentSessionUserId()||0},'${o||""}' `,p=this._commonService.generateApiRequestParam(g.sqlFunNameList.select,null,a);return this._httpClient.post(g.apiUrl+g.sqlController,p)}static{this.\u0275fac=function(o){return new(o||r)(R(G),R(b))}}static{this.\u0275prov=B({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ut(r,c){if(r&1){let t=P();i(0,"p",14),L("click",function(e){let a=C(t).$implicit,p=y(3);return p.shoeSelectedAttribute(a.label||""),v(p.showConfimPopUp(e,a.label?a.label:""))}),s(1),n()}if(r&2){let t=c.$implicit;l(),D(" ",t.label," ")}}function ft(r,c){if(r&1&&(i(0,"p-accordionTab",12),u(1,ut,2,1,"p",13),n()),r&2){let t=c.$implicit;m("header",t.label),l(),m("ngForOf",t.items)}}function ht(r,c){if(r&1&&(i(0,"div",9)(1,"p-accordion",10),u(2,ft,2,2,"p-accordionTab",11),n()()),r&2){let t=y();l(),m("activeIndex",0),l(),m("ngForOf",t.items)}}function St(r,c){if(r&1){let t=P();i(0,"div",15)(1,"span"),s(2),n(),i(3,"div",16)(4,"button",17),L("click",function(){C(t);let e=y();return v(e.confirmPopup.accept())}),s(5,"Yes"),n(),i(6,"button",18),L("click",function(){C(t);let e=y();return v(e.confirmPopup.reject())}),s(7,"No"),n()()()}if(r&2){let t=c.$implicit;l(2),S(t.message)}}var Nt=(()=>{class r{constructor(t,o,e,a){this._attributeSetService=t,this._commonServices=o,this._dialogConfig=e,this._confirmationService=a,this.attributeSetList=[],this.items=[],this.appointmentAdmissionId=0,this.selectedSetName=""}ngOnInit(){this.loadAttributeSet();let t=this._dialogConfig.data||null;console.log(t),t&&(this.appointmentAdmissionId=t.appointmentId||0),console.log(this.items)}loadAttributeSet(){this._commonServices.activeLoader(),this._attributeSetService.getAttributeSet().subscribe(t=>{console.log(t),this._commonServices.deactiveLoader(),t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.attributeSetList=[],this.attributeSetList=t.dataSet.Table,this.filterAttributeItemList())},t=>{this._commonServices.deactiveLoader(),console.error(t)})}filterAttributeItemList(){let t=null;t=this.attributeSetList;let o=[];if(t.length&&this.attributeSetList.length){let e="";for(let a=0;a<this.attributeSetList.length;a++)a===0&&(e=this.attributeSetList[a].Title,o.push(e)),e.toLowerCase()!==this.attributeSetList[a].Title.toLowerCase()&&(e=this.attributeSetList[a].Title,o.push(e));for(let a=0;a<o.length;a++)if(o[a]){let p={label:"",items:[]};if(p.label=o[a].toUpperCase(),this.items.push(p),o[a]){for(let f=0;f<this.attributeSetList.length;f++)if(o[a].toLowerCase()===this.attributeSetList[f].Title.toLowerCase()){let _={label:"",id:"",badge:""};_.label=this.attributeSetList[f].SetName.toUpperCase(),_.id=this.attributeSetList[f].AttributeSetId.toString(),_.badge=f.toString(),_.id&&this.items[a].items?.push(_)}}}console.log(this.items)}}generateSet(){this.appointmentAdmissionId&&this.selectedSetName?this._attributeSetService.saveAttributeSet(this.appointmentAdmissionId,this.selectedSetName).subscribe(t=>{console.log(t),t.Status.toLowerCase().includes("success")&&t.noofREcords&&window.document.location.reload(),t.Status.toLowerCase().includes("failed")&&window.document.location.reload()},t=>{console.error(t),alert("Please check log, for more detail.")}):alert("Please provide proper set name & admission or appointment id.")}shoeSelectedAttribute(t){this.selectedSetName="",this.selectedSetName=t,console.log(this.selectedSetName)}showConfimPopUp(t,o){this.selectedSetName=o,this._confirmationService.confirm({target:t.target,message:"Are you sure, you like to load this set ?",accept:()=>{this.generateSet()},reject:()=>{}})}static{this.\u0275fac=function(o){return new(o||r)(d(pt),d(b),d(k),d(z))}}static{this.\u0275cmp=w({type:r,selectors:[["app-attribute-set"]],viewQuery:function(o,e){if(o&1&&q(M,5),o&2){let a;$(a=W())&&(e.confirmPopup=a.first)}},decls:13,vars:1,consts:[["op",""],["confirmPopupRef",""],[1,"row"],["class","col-12",4,"ngIf"],[1,"flex","flex-column","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"flex","flex-row","gap-2"],["src","assets/images/discharge_summary.png","alt","","height","20px","srcset",""],["pTemplate","headless"],[1,"col-12"],[3,"activeIndex"],[3,"header",4,"ngFor","ngForOf"],[3,"header"],["class","m-0",3,"click",4,"ngFor","ngForOf"],[1,"m-0",3,"click"],[1,"border-round","p-3"],[1,"flex","align-items-center","gap-2","mt-3"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"]],template:function(o,e){if(o&1){let a=P();i(0,"div",2),u(1,ht,3,2,"div",3),n(),i(2,"p-overlayPanel",null,0)(4,"div",4)(5,"button",5),L("click",function(){return C(a),v(e.generateSet())}),i(6,"div",6),h(7,"img",7),i(8,"strong"),s(9,"Load Set"),n()()()()(),i(10,"p-confirmPopup",null,1),u(12,St,8,1,"ng-template",8),n()}o&2&&(l(),m("ngIf",e.items.length))},dependencies:[T,E,Q,N,F,tt,M,et,nt,it],styles:["[_nghost-%COMP%]     .p-panelmenu .p-panelmenu-header .p-panelmenu-header-content .p-panelmenu-header-action{padding:.9rem!important}[_nghost-%COMP%]     .p-panelmenu .p-panelmenu-content .p-menuitem>.p-menuitem-content .p-menuitem-link{padding:.75rem .9rem!important}"]})}}return r})();function gt(r,c){if(r&1&&(i(0,"option",19),s(1),I(2,"uppercase"),n()),r&2){let t=c.$implicit;l(),S(x(2,1,t))}}function bt(r,c){if(r&1&&(i(0,"option",19),s(1),I(2,"uppercase"),n()),r&2){let t=c.$implicit;l(),S(x(2,1,t))}}function _t(r,c){if(r&1&&(i(0,"option",19),s(1),I(2,"uppercase"),n()),r&2){let t=c.$implicit;l(),S(x(2,1,t))}}function Ct(r,c){if(r&1&&(i(0,"option",19),s(1),I(2,"uppercase"),n()),r&2){let t=c.$implicit;l(),S(x(2,1,t))}}var Vt=(()=>{class r{constructor(t,o,e,a){this._commonService=t,this._dialogeConfig=o,this._patientServices=e,this._appointmentServices=a,this.maritalStatusList=[],this.patientId=0,this.appointmentId=0,this.payerList=[],this.tpaList=[],this.patientCategoryList=[],this.listType="",this.listDetail=new ot(""),this.isNewListDetail=!1,this.patientDetails=null,this.birthdate={day:"",month:"",year:""},this.doctorList=[],this.appointmentReasonList=[],this.referralDoctorList=[],this.departmentList=[],this.appointmentDetail=null}ngOnInit(){let t=this._dialogeConfig.data||null;t&&(console.log(t),this.patientId=t.patientId||0,this.appointmentId=t.appointmentId||0,this.loadPatientDetailsByPatientId(),this.loadAppointmentDetailByAppointmentIdPatientId()),this.loadAppointmentReasonConsultantDoctorReferralDoctorDepartmentList(),this.loadMaritalStatusList(),this.loadPatientCategoryList(),this.loadPayerList(),this.loadTpaList()}ngOnChanges(t){t.patientId&&t.appointmentId&&(this.loadPatientDetailsByPatientId(),this.loadAppointmentDetailByAppointmentIdPatientId())}loadMaritalStatusList(){this._commonService.getMaritalStatusList().subscribe(t=>{t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.maritalStatusList=[],this.maritalStatusList=t.dataSet.Table)},t=>{console.error(t),alert("Please check log, for more details")})}loadPayerList(){this._commonService.getPayerList().subscribe(t=>{t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.payerList=[],this.payerList=t.dataSet.Table)},t=>{console.error(t),alert("Please check log, for more details")})}loadTpaList(){this._commonService.getTpaList().subscribe(t=>{t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.tpaList=[],this.tpaList=t.dataSet.Table)},t=>{console.error(t),alert("Please check log, for more details")})}loadPatientCategoryList(){this._commonService.getPatientCategoryList().subscribe(t=>{t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.patientCategoryList=[],this.patientCategoryList=t.dataSet.Table)},t=>{console.error(t),alert("Please check log, for more details")})}saveListDetail(){this.listType&&this.listDetail.ListItem?(this.listDetail.ListType=this.listType||"",this.listDetail.CreatedBy=this._commonService.getCurrentSessionUserId()||0,this._commonService.saveListByListType(this.listDetail).subscribe(t=>{console.log(t),t.Status.toLowerCase().includes("success")&&t.Data&&alert("Successfully Done.")},t=>{console.error(t),alert("Please check log, for  more details.")})):alert("Please try again!")}loadPatientDetailsByPatientId(){this._patientServices.getPatientDetailsByPatientId(this.patientId).subscribe(t=>{console.log(t),t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.patientDetails=t.dataSet.Table[0],this.birthdate.day=this.patientDetails.PrimaryFld3.split(" ")[0],this.birthdate.month=this.patientDetails.PrimaryFld3.split(" ")[1],this.birthdate.year=this.patientDetails.PrimaryFld3.split(" ")[2])},t=>{console.error(t),alert("Please check log, for more detail.")})}loadAppointmentReasonConsultantDoctorReferralDoctorDepartmentList(){this._appointmentServices.getAppointmentReasonConsultantDoctorReferralDoctorDepartmentList().subscribe(t=>{if(t.Status.toLowerCase().includes("success")&&t.noofREcords){this.appointmentReasonList=[],this.doctorList=[],this.referralDoctorList=[],this.departmentList=[];let o=Object.keys(t.dataSet);o.length&&(o.map(e=>{t.dataSet[e]&&t.dataSet[e].map(a=>{Object.keys(a).forEach(f=>{f.toLowerCase().includes("listtype")&&(a.listtype.toLowerCase()==="appointment reason"?this.appointmentReasonList.push(a.listItem):a.listtype.toLowerCase()==="referraldoctor"?this.referralDoctorList.push(a.listItem):a.listtype.toLowerCase()==="department"&&this.departmentList.push(a.listItem)),f.toLowerCase().includes("column1")&&a.Column1.toLowerCase()==="consultant doctor"&&this.doctorList.push(a.UserName)})})}),console.log(this.appointmentReasonList),console.log(this.doctorList),console.log(this.referralDoctorList),console.log(this.departmentList))}},t=>{console.error(t),alert("Please check log, for more details.")})}loadAppointmentDetailByAppointmentIdPatientId(){this._appointmentServices.getAppointmentDetailsByAppointmentIdPatientId(this.appointmentId,this.patientId).subscribe(t=>{console.log(t),t.Status.toLowerCase().includes("success")&&t.noofREcords&&(this.appointmentDetail=null,this.appointmentDetail=t.dataSet.Table[0])},t=>{console.error(t),alert("Please check log, for more details.")})}static{this.\u0275fac=function(o){return new(o||r)(d(b),d(k),d(at),d(rt))}}static{this.\u0275cmp=w({type:r,selectors:[["app-patient-appointment"]],inputs:{patientId:"patientId",appointmentId:"appointmentId"},features:[V],decls:125,vars:12,consts:[[1,"container-fluid",2,"min-height","500px !important"],[1,"row"],[1,"col-12"],[1,"d-flex","flex-column","p-2",2,"border","2px solid black"],["for","",2,"margin-top","-20px","margin-left","15px"],[2,"background-color","white"],[1,"d-flex","flex-column"],[1,"d-flex","justify-content-between","align-items-center"],[2,"color","red"],[1,"d-flex","flex-row"],["type","text","id","","disabled","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-sm",2,"background-color","#03AED2","color","white"],[1,"bi","bi-info-circle-fill"],[1,"col-12","mt-2"],[1,"table","table-bordered","table-sm"],[1,"d-flex","justify-content-center","align-items-center"],[1,"text-nowrap"],["type","datetime-local","id","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["name","","id","",1,"form-select","form-select-sm",3,"disabled"],["value",""],["value","",4,"ngFor","ngForOf"],["name","","id","",1,"form-select","form-select-sm"],["type","text","id","","placeholder","Enter patient native location",1,"form-control","form-control-sm"],[1,"text-center"],["type","text","placeholder","MLC No.",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-sm","btn-warning"],["name","","id","","rows","3","placeholder","Enter additional details, if you find any.",1,"form-control","form-control-sm"],[1,"col-12","text-end"],["type","button","disabled","",1,"btn","btn-success","shadow-lg"]],template:function(o,e){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4)(5,"strong",5),s(6," Patient Details "),n()(),i(7,"div",6)(8,"small",7)(9,"strong"),s(10,"Patient Name "),i(11,"i"),s(12),n()(),i(13,"strong",8),s(14),n()(),i(15,"div",9)(16,"input",10),U("ngModelChange",function(p){return j(e.patientDetails.EntityName,p)||(e.patientDetails.EntityName=p),p}),n(),i(17,"button",11),h(18,"i",12),n()()()()(),i(19,"div",13)(20,"div",3)(21,"label",4)(22,"strong",5),s(23," Appointment Details "),n()(),i(24,"table",14)(25,"tbody")(26,"tr")(27,"td")(28,"small",15)(29,"strong",16),s(30,"Appointment Date"),n()()(),i(31,"td")(32,"input",17),U("ngModelChange",function(p){return j(e.appointmentDetail.SendAt,p)||(e.appointmentDetail.SendAt=p),p}),n()()(),i(33,"tr")(34,"td")(35,"small",15)(36,"strong",16),s(37,"Appointment For"),n()()(),i(38,"td")(39,"select",18)(40,"option",19),s(41,"Select reason..."),n(),u(42,gt,3,3,"option",20),n()()(),i(43,"tr")(44,"td")(45,"small",15)(46,"strong",16),s(47,"Doctor"),n()()(),i(48,"td")(49,"select",18)(50,"option",19),s(51,"Select doctor..."),n(),u(52,bt,3,3,"option",20),n()()(),i(53,"tr")(54,"td")(55,"small",15)(56,"strong",16),s(57,"Referred Doctor"),n()()(),i(58,"td")(59,"select",18)(60,"option",19),s(61,"Select referral doctor..."),n(),u(62,_t,3,3,"option",20),n()()()()()()(),i(63,"div",13)(64,"div",3)(65,"label",4)(66,"strong",5),s(67," Additional Details "),n()(),i(68,"table",14)(69,"tbody")(70,"tr")(71,"td")(72,"small",15)(73,"strong",16),s(74,"Department"),n()()(),i(75,"td")(76,"select",21)(77,"option",19),s(78,"Select reason..."),n()()()(),i(79,"tr")(80,"td")(81,"small",15)(82,"strong",16),s(83,"Location"),n()()(),i(84,"td"),h(85,"input",22),n()(),i(86,"tr")(87,"td")(88,"small",15)(89,"strong",16),s(90,"Send To"),n()()(),i(91,"td")(92,"select",18)(93,"option",19),s(94,"Select doctor..."),n(),u(95,Ct,3,3,"option",20),n()()(),i(96,"tr")(97,"td")(98,"small",15)(99,"strong",16),s(100,"Treatment Plan"),n()()(),i(101,"td")(102,"select",21)(103,"option",19),s(104,"Select plan..."),n()()()(),i(105,"tr")(106,"td",23)(107,"small",15)(108,"strong",16),s(109,"MLC No."),n()()(),i(110,"td",9),h(111,"input",24),i(112,"button",25)(113,"strong"),s(114,"Generate"),n()()()(),i(115,"tr")(116,"td")(117,"small",15)(118,"strong",16),s(119,"Additional Details"),n()()(),i(120,"td"),h(121,"textarea",26),n()()()()()(),i(122,"div",27)(123,"button",28),s(124," Save Appointment Detail "),n()()()()),o&2&&(l(12),D("(",e.patientDetails.EntityId,")"),l(2),D("UHID No: ",e.patientDetails.RegNo,""),l(2),O("ngModel",e.patientDetails.EntityName),l(16),O("ngModel",e.appointmentDetail.SendAt),l(7),m("disabled",!e.appointmentReasonList.length),l(3),m("ngForOf",e.appointmentReasonList),l(7),m("disabled",!e.doctorList.length),l(3),m("ngForOf",e.doctorList),l(7),m("disabled",!e.referralDoctorList.length),l(3),m("ngForOf",e.referralDoctorList),l(30),m("disabled",!e.doctorList.length),l(3),m("ngForOf",e.doctorList))},dependencies:[T,E,K,F,N,J,Z,H,X,Y],encapsulation:2})}}return r})();export{Nt as a,Vt as b};
