import{a as ge}from"./chunk-J6ZVA5VK.js";import{a as E}from"./chunk-XFGMMR5A.js";import{K as X,p as Me,v as G}from"./chunk-A34WLQ27.js";import{b as $,d as J,e as H,g as he,h as K,i as z,l as Z,m as fe}from"./chunk-OCIRHO6A.js";import{b,c as j}from"./chunk-6XXP7TRA.js";import"./chunk-3RSPD7AX.js";import{m as q,n as F,q as me,s as pe,t as Q,z as _e}from"./chunk-N4ANQEKW.js";import{Db as f,Eb as d,Hb as ue,Ia as ce,Ma as a,Na as D,Ob as k,Pb as u,Q as se,Qb as L,Rb as v,Ub as x,V as ie,Vb as y,Wb as w,Xb as de,Ya as W,ca as p,cb as m,da as _,fc as P,gc as V,nb as s,tb as r,ub as o,vb as g,wb as S,xb as M,zb as h}from"./chunk-ZPID5U3R.js";var Y=(()=>{class t{constructor(e,i){this._httpClient=e,this._commonServices=i}getCashSummaryReports(e,i,n,l,C){let A=`
      select
      tb.BillNo, tb.IPCaseNo, tb.PatientId, tb.AppointmentId, tb.PayerName, tb.TPA,
      tb.BillDate, tb.AdmissionDate, tb.DischargeDate, tb.PanNo,tb.BedNo, tb.TotalAmt, tb.AmountToPatient,
      ReceiptAmount = (select SUM(Receipts) from tblBillReceipt where BillNo = tb.billno),
      tb.DiscountAmt, tb.AmountToPayer, tb.B_Department, tb.B_WhichOpd, tb.Active
      from tblBill as tb
      where
      AppointmentId in
      (select
      ${n?"AdmissionId":""}
      ${l?"AppointmentId":""}
      from
      ${n?"tblAdmission":""}
      ${l?"tblAppointment":""}
      where
      ${n?" CAST(TAdmissionDate as Date)":""}
      ${l?" CAST(StartDatetime as Date)":""}
      between '${e}' and '${i}') and
      B_WhichOpd like
      ${n?"'ipd'":""}
      ${l?"'opd'":""}
      'ipd';
    `,T=this._commonServices.generateApiRequestParam(b.sqlFunNameList.select,null,A);return this._httpClient.post(b.apiUrl+b.sqlController,T)}getIpdAdmittedPatientList(e,i){let n=`
    select * from tblAdmission where CAST(TAdmissionDate as Date) between '${e}' and '${i}' and Active = 1
    `,l=this._commonServices.generateApiRequestParam(b.sqlFunNameList.select,null,n);return this._httpClient.post(b.apiUrl+b.sqlController,l)}getOpdAdmittedPatientList(e,i){let n=`
    select * from tblAppointment where CAST(StartDatetime as Date) between '${e}' and '${i}' and Active = 1
    `,l=this._commonServices.generateApiRequestParam(b.sqlFunNameList.select,null,n);return this._httpClient.post(b.apiUrl+b.sqlController,l)}saveMenuWithSubMenuDetail(e){let i=this._commonServices.generateApiRequestParam(b.commonList.saveDetails,e);return this._httpClient.post(b.apiUrl+b.listController,i)}getReportCollectionSidebarMenuList(){let i=this._commonServices.generateApiRequestParam(b.sqlFunNameList.select,null,"select * from tblListitems where listtype like 'report-collection-sidebar-main-menu' and active = 1");return this._httpClient.post(b.apiUrl+b.sqlController,i)}getReportCollectionByQuery(e){let i=e,n=this._commonServices.generateApiRequestParam(b.sqlFunNameList.select,null,i);return this._httpClient.post(b.apiUrl+b.sqlController,n)}static{this.\u0275fac=function(i){return new(i||t)(ie(_e),ie(j))}}static{this.\u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ve(t,c){if(t&1){let e=h();r(0,"button",13),f("click",function(){p(e);let n=d();return _(n.returnBackOption())}),r(1,"strong",7),g(2,"i",14),o()()}}function De(t,c){if(t&1){let e=h();S(0),r(1,"div",16),f("click",function(){let n=p(e).$implicit,l=d(2);return _(l.setSelectedMenuSubMenuList(n))}),u(2),o(),M()}if(t&2){let e=c.$implicit;a(2),v(" ",e.ListItem," ")}}function Le(t,c){if(t&1&&(S(0),m(1,De,3,1,"ng-container",15),M()),t&2){let e=d();a(),s("ngForOf",e.reportCollectionSidebarMenuList)}}function Te(t,c){if(t&1){let e=h();S(0),r(1,"div",16),f("click",function(){let n=p(e).$implicit,l=d(2);return _(l.setSelectedSubMenuDetail(n))}),u(2),o(),M()}if(t&2){let e=c.$implicit;a(2),v(" ",e.subMenuName," ")}}function Ee(t,c){if(t&1&&(S(0),m(1,Te,3,1,"ng-container",15),M()),t&2){let e=d();a(),s("ngForOf",e.selectedMenu.ListParam)}}function Re(t,c){if(t&1){let e=h();S(0),r(1,"div",16),f("click",function(){let n=p(e).$implicit,l=d(2);return _(l.setSelectedMicroMenuDetail(n))}),u(2),o(),M()}if(t&2){let e=c.$implicit;a(2),v(" ",e.subMenuName," ")}}function Ie(t,c){if(t&1&&(S(0),m(1,Re,3,1,"ng-container",15),M()),t&2){let e=d();a(),s("ngForOf",e.selectedSubMenu.subMenuArray)}}function Ue(t,c){if(t&1){let e=h();S(0),r(1,"div",16),f("click",function(){let n=p(e).$implicit,l=d(2);return _(l.setSelectedMicroTypeMenuDetail(n))}),u(2),o(),M()}if(t&2){let e=c.$implicit;a(2),v(" ",e.microMenuName," ")}}function Ae(t,c){if(t&1&&(S(0),m(1,Ue,3,1,"ng-container",15),M()),t&2){let e=d();a(),s("ngForOf",e.selectedMicroMenu.subMenuArray)}}function Ne(t,c){if(t&1){let e=h();S(0),r(1,"div",17)(2,"div",18)(3,"strong"),u(4,"Query"),o(),r(5,"strong")(6,"i"),u(7),o()(),r(8,"button",19),f("click",function(){p(e);let n=d();return _(n.updateMenuDetailWithSubMenuDetail())}),r(9,"strong",20),u(10,"Save Menu Detail"),o()()(),r(11,"textarea",21),w("ngModelChange",function(n){p(e);let l=d();return y(l.selectedMicroTypeMenu.microMenuQuery,n)||(l.selectedMicroTypeMenu.microMenuQuery=n),_(n)}),o()(),M()}if(t&2){let e=d();a(7),v("(",e.selectedMicroTypeMenu.microMenuName,")"),a(4),x("ngModel",e.selectedMicroTypeMenu.microMenuQuery)}}function ke(t,c){t&1&&(r(0,"div",30)(1,"strong")(2,"i"),u(3,"Please enter sub menu name & it`s query!"),o()()())}function Pe(t,c){t&1&&g(0,"i",38)}function Ve(t,c){t&1&&g(0,"i",39)}function Oe(t,c){if(t&1&&(r(0,"tr")(1,"td"),u(2),o(),r(3,"td"),u(4),o(),r(5,"td",32),m(6,Pe,1,0,"i",33)(7,Ve,1,0,"i",34),o(),r(8,"td",32)(9,"button",35),g(10,"i",36),o()(),r(11,"td",32)(12,"button",37),g(13,"i",36),o()()()),t&2){let e=c.$implicit,i=c.index;a(2),L(i+1),a(2),L(e.microMenuName),a(2),s("ngIf",e.microMenuQuery.length),a(),s("ngIf",!e.microMenuQuery.length)}}function Be(t,c){if(t&1&&(S(0),r(1,"table",31)(2,"thead")(3,"tr")(4,"th"),u(5,"#"),o(),r(6,"th"),u(7,"Sub Menu Report Name"),o(),r(8,"th",32),u(9,"Query"),o(),r(10,"th",32),u(11,"Edit"),o(),r(12,"th",32),u(13,"Delete"),o()()(),r(14,"tbody"),m(15,Oe,14,4,"tr",15),o()(),M()),t&2){let e=d(3);a(15),s("ngForOf",e.addMicroSubMenuDetail.subMenuArray)}}function We(t,c){if(t&1&&(S(0),r(1,"div",28),m(2,ke,4,0,"div",29)(3,Be,16,1,"ng-container",12),o(),M()),t&2){let e=d(2);a(2),s("ngIf",!e.addUpdateMenuDetail.ListParam.length),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuArray)}}function qe(t,c){if(t&1){let e=h();r(0,"button",49),f("click",function(){p(e);let n=d(3);return _(n.verifyAddUpdateMenuDetailBeforeSaving())}),u(1,"Save Menu"),o()}}function Fe(t,c){if(t&1){let e=h();r(0,"input",50),w("ngModelChange",function(n){p(e);let l=d(3);return y(l.addUpdateMenuDetail.ListItem,n)||(l.addUpdateMenuDetail.ListItem=n),_(n)}),o()}if(t&2){let e=d(3);x("ngModel",e.addUpdateMenuDetail.ListItem)}}function Qe(t,c){if(t&1){let e=h();r(0,"select",51),w("ngModelChange",function(n){p(e);let l=d(3);return y(l.addUpdateMenuDetail.ListItem,n)||(l.addUpdateMenuDetail.ListItem=n),_(n)}),r(1,"option",26),u(2,"Please select menu..."),o(),g(3,"option",26),o()}if(t&2){let e=d(3);x("ngModel",e.addUpdateMenuDetail.ListItem)}}function je(t,c){if(t&1){let e=h();r(0,"button",52),f("click",function(){p(e);let n=d(3);return _(n.isAddUpdateSubMenu=!0)}),u(1,"Add"),o()}}function $e(t,c){if(t&1){let e=h();r(0,"button",55),f("click",function(){p(e);let n=d(4);return _(n.addSubMenuDetail())}),g(1,"i",8),o()}}function Je(t,c){if(t&1){let e=h();r(0,"div",41)(1,"strong",20),u(2,"Sub Menu Name"),o(),r(3,"div",22)(4,"input",53),w("ngModelChange",function(n){p(e);let l=d(3);return y(l.addUpdateSubMenuDetail.subMenuName,n)||(l.addUpdateSubMenuDetail.subMenuName=n),_(n)}),o(),m(5,$e,2,0,"button",54),o()()}if(t&2){let e=d(3);a(4),x("ngModel",e.addUpdateSubMenuDetail.subMenuName),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuName&&e.addUpdateSubMenuDetail.subMenuArray.length)}}function He(t,c){if(t&1){let e=h();r(0,"button",55),f("click",function(){p(e);let n=d(4);return _(n.addMicroMenuDetail())}),g(1,"i",8),o()}}function Ke(t,c){if(t&1){let e=h();r(0,"div",41)(1,"strong",20),u(2,"Report Name"),o(),r(3,"div",22)(4,"input",53),w("ngModelChange",function(n){p(e);let l=d(3);return y(l.addMicroSubMenuDetail.subMenuName,n)||(l.addMicroSubMenuDetail.subMenuName=n),_(n)}),o(),m(5,He,2,0,"button",54),o()()}if(t&2){let e=d(3);a(4),x("ngModel",e.addMicroSubMenuDetail.subMenuName),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuName&&e.addMicroSubMenuDetail.subMenuName&&e.addMicroSubMenuDetail.subMenuArray.length)}}function ze(t,c){if(t&1){let e=h();r(0,"button",55),f("click",function(){p(e);let n=d(4);return _(n.addMicroMenuTypeDetail())}),g(1,"i",8),o()}}function Ze(t,c){if(t&1){let e=h();r(0,"div",41)(1,"strong",20),u(2,"Report Type"),o(),r(3,"div",22)(4,"input",56),w("ngModelChange",function(n){p(e);let l=d(3);return y(l.addMicroSubMenuTypeDetail.microMenuName,n)||(l.addMicroSubMenuTypeDetail.microMenuName=n),_(n)}),o(),m(5,ze,2,0,"button",54),o()()}if(t&2){let e=d(3);a(4),x("ngModel",e.addMicroSubMenuTypeDetail.microMenuName),s("disabled",!e.addMicroSubMenuDetail.subMenuName.length),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuName&&e.addMicroSubMenuDetail.subMenuName&&e.addMicroSubMenuTypeDetail.microMenuName&&e.addMicroSubMenuTypeDetail.userAccessList.length)}}function Ge(t,c){if(t&1){let e=h();r(0,"li",62),f("click",function(){p(e);let n=k(2);return _(n.click())}),r(1,"input",63,1),f("click",function(){let n=p(e).$implicit,l=k(2),C=d(5);return _(C.addDeleteUserAccess(n.UserId,l.checked))}),o(),r(3,"strong"),u(4),P(5,"uppercase"),o()()}if(t&2){let e=c.$implicit,i=d(5);a(),s("checked",i.check_IsUserAdded(e.UserId)),a(3),L(V(5,2,e.UserName))}}function Xe(t,c){if(t&1){let e=h();r(0,"ul",61)(1,"li",62),f("click",function(){p(e);let n=k(3);return _(n.click())}),r(2,"input",63,0),f("click",function(){p(e);let n=k(3),l=d(4);return _(l.addDeleteUserAccess(0,n.checked))}),o(),r(4,"strong"),u(5,"All"),o()(),m(6,Ge,6,4,"li",64),o()}if(t&2){let e=d(4);a(2),s("checked",e.check_IsUserAdded(0)),a(4),s("ngForOf",e.userlist)}}function Ye(t,c){t&1&&(r(0,"label",65)(1,"strong",66),u(2,"User list not fetched!"),o()())}function et(t,c){if(t&1&&(r(0,"div",41)(1,"strong",20),u(2,"User Access"),o(),r(3,"div",22)(4,"div",57)(5,"button",58),u(6," Select User "),o(),m(7,Xe,7,2,"ul",59),o(),m(8,Ye,3,0,"label",60),o()()),t&2){let e=d(3);a(5),s("disabled",!e.addMicroSubMenuTypeDetail.microMenuQuery.length),a(2),s("ngIf",e.userlist.length),a(),s("ngIf",!e.userlist.length)}}function tt(t,c){if(t&1&&(S(0)(1),r(2,"div",40)(3,"div",41)(4,"div",42)(5,"strong"),u(6,"Menu Name"),o(),m(7,qe,2,0,"button",43),o(),r(8,"div",24),m(9,Fe,1,1,"input",44)(10,Qe,4,1,"select",45)(11,je,2,0,"button",46),o()(),m(12,Je,6,2,"div",47),o(),M(),r(13,"div",41)(14,"div",48),m(15,Ke,6,2,"div",47)(16,Ze,6,3,"div",47)(17,et,9,3,"div",47),o()(),M()),t&2){let e=d(2);a(7),s("ngIf",e.isAddUpdateSubMenu&&e.addUpdateMenuDetail.ListParam.length>0),a(2),s("ngIf",!e.isDirectAddSubMenu),a(),s("ngIf",e.isDirectAddSubMenu),a(),s("ngIf",!e.isAddUpdateSubMenu&&e.addUpdateMenuDetail.ListItemId==-1&&e.addUpdateMenuDetail.ListItem.length>0),a(),s("ngIf",e.isAddUpdateSubMenu),a(3),s("ngIf",e.addUpdateSubMenuDetail.subMenuName.length>0),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuName.length>0),a(),s("ngIf",e.addUpdateSubMenuDetail.subMenuName.length>0)}}function nt(t,c){t&1&&(r(0,"small",66)(1,"i"),u(2," - (Please add report name first...)"),o()())}function it(t,c){if(t&1){let e=h();S(0),r(1,"div",67)(2,"strong"),u(3,"Query "),m(4,nt,3,0,"small",68),o(),r(5,"textarea",69),w("ngModelChange",function(n){p(e);let l=d(2);return y(l.addMicroSubMenuTypeDetail.microMenuQuery,n)||(l.addMicroSubMenuTypeDetail.microMenuQuery=n),_(n)}),o()(),M()}if(t&2){let e=d(2);a(4),s("ngIf",!e.addMicroSubMenuTypeDetail.microMenuName),a(),s("disabled",!e.addMicroSubMenuTypeDetail.microMenuName),x("ngModel",e.addMicroSubMenuTypeDetail.microMenuQuery)}}function ot(t,c){if(t&1&&(S(0),r(1,"div",22)(2,"div",23)(3,"div",24)(4,"select",25)(5,"option",26),u(6,"Select Menu..."),o(),g(7,"option",26),o(),r(8,"select",25)(9,"option",26),u(10,"Select Sub Menu..."),o(),g(11,"option",26),o(),r(12,"select",25)(13,"option",26),u(14,"Select Micro Menu..."),o(),g(15,"option",26),o(),r(16,"select",25)(17,"option",26),u(18,"Select Micro Menu Type..."),o(),g(19,"option",26),o()(),m(20,We,4,2,"ng-container",12),o(),r(21,"div",27),m(22,tt,18,8,"ng-container",12)(23,it,6,3,"ng-container",12),o()(),M()),t&2){let e=d();a(20),s("ngIf",e.isAddUpdateSubMenu),a(2),s("ngIf",e.isAddUpdateMenu),a(),s("ngIf",e.isAddUpdateMenu&&e.isAddUpdateSubMenu)}}var R=class{constructor(){this.subMenuName="",this.subMenuArray=[]}},I=class{constructor(){this.subMenuName="",this.subMenuArray=[]}},U=class{constructor(){this.microMenuName="",this.microMenuQuery="",this.userAccessList=[]}};var Ce=(()=>{class t{constructor(e,i){this._reportServices=e,this._userService=i,this.isMenuShow=!0,this.isSubMenuShow=!1,this.isMicroMenuShow=!1,this.isMicroMenuTypeShow=!1,this.isQueryShow=!1,this.isAddUpdateMenu=!1,this.isAddUpdateSubMenu=!1,this.isDirectAddSubMenu=!1,this.addUpdateMenuDetail=new E("report-collection-sidebar-main-menu"),this.addUpdateSubMenuDetail=new R,this.showingMenuName="menu",this.addMicroSubMenuDetail=new I,this.addMicroSubMenuTypeDetail=new U,this.userlist=[],this.reportCollectionSidebarMenuList=[],this.selectedMenu=new E(""),this.selectedSubMenu=new R,this.selectedMicroMenu=new I,this.selectedMicroTypeMenu=new U}ngOnInit(){this.loadUserList_UserIdUserName(),this.resetAddUpdateMenuDetail(),this.loadReportCollectionSideBarMenuList(),console.log(this.addUpdateMenuDetail)}resetAddUpdateMenuDetail(){this.addUpdateMenuDetail=new E("report-collection-sidebar-main-menu"),this.addUpdateMenuDetail.ListParam=[],this.isAddUpdateSubMenu=!1}showSubMenuOptionByMenu(){this.showingMenuName="submenu"}showMicroMenuOptionByMenu(){this.showingMenuName="micromenu"}showMicroTypeMenuOptionByMenu(){this.showingMenuName="microtypemenu"}showQueryOptionBySubMenu(){this.isSubMenuShow=!1,this.isMenuShow=!1,this.isQueryShow=!0,this.showingMenuName="query"}showAddUpdateMenu(){this.isSubMenuShow=!1,this.isMenuShow=!1,this.isQueryShow=!1,this.isAddUpdateMenu=!0}returnBackOption(){this.isSubMenuShow?(this.isSubMenuShow=!1,this.isMenuShow=!0,this.isQueryShow=!1):this.isQueryShow?(this.isSubMenuShow=!0,this.isMenuShow=!1,this.isQueryShow=!1):(this.isSubMenuShow=!1,this.isMenuShow=!0,this.isQueryShow=!1)}addMicroMenuDetail(){this.addUpdateSubMenuDetail.subMenuArray.push(this.addMicroSubMenuDetail),this.addMicroSubMenuDetail=new I}addMicroMenuTypeDetail(){this.addMicroSubMenuDetail.subMenuArray.push(this.addMicroSubMenuTypeDetail),this.addMicroSubMenuTypeDetail=new U}addSubMenuDetail(){this.addUpdateMenuDetail.ListParam.push(this.addUpdateSubMenuDetail),this.addUpdateSubMenuDetail=new R}updateSubMenuDetail(e){typeof this.addUpdateMenuDetail.ListParam=="object"?this.addUpdateSubMenuDetail=this.addUpdateMenuDetail.ListParam[e]:this.convertStringToObject(this.updateSubMenuDetail,e)}loadUserList_UserIdUserName(){debugger;this._userService.getUserListWithOnlyUserIdUserName().subscribe(e=>{console.log(e),e.noofREcords&&e.Status.toLowerCase().trim().includes("success")&&(this.userlist=[],this.userlist=e.dataSet.Table)},e=>{console.error(e),alert("Please check log, for more detail.")})}verifyAddUpdateMenuDetailBeforeSaving(){debugger;typeof this.addUpdateMenuDetail.ListParam=="object"?this.addUpdateMenuDetail.ListParam.length?(this.addUpdateMenuDetail.ListParam=JSON.stringify(this.addUpdateMenuDetail.ListParam),this.saveMenuDetailWithSubMenuDetail()):alert("Please add sub menu before saving menu detail."):this.convertStringToObject(this.verifyAddUpdateMenuDetailBeforeSaving)}saveMenuDetailWithSubMenuDetail(){this._reportServices.saveMenuWithSubMenuDetail(this.addUpdateMenuDetail).subscribe(e=>{console.log("saveMenuWithSubMenuDetail",e),e.Status.toLowerCase()==="success"&&(this.resetAddUpdateMenuDetail(),this.loadReportCollectionSideBarMenuList())},e=>{console.error(e)})}updateMenuDetailWithSubMenuDetail(){this.addUpdateMenuDetail=new E(""),this.addUpdateMenuDetail=this.selectedMenu,this.addUpdateMenuDetail.ListParam&&typeof this.addUpdateMenuDetail.ListParam=="object"&&(this.addUpdateMenuDetail.ListParam=JSON.stringify(this.addUpdateMenuDetail.ListParam)),this.addUpdateMenuDetail.ListItemId>0?this.saveMenuDetailWithSubMenuDetail():alert("Do you like to create new entry..!")}convertStringToObject(e,i){this.addUpdateMenuDetail.ListParam!=null&&this.addUpdateMenuDetail.ListParam!=null&&typeof this.addUpdateMenuDetail.ListParam=="string"&&this.addUpdateMenuDetail.ListParam.length>0&&(this.addUpdateMenuDetail.ListParam=JSON.parse(this.addUpdateMenuDetail.ListParam),i.toString())}loadReportCollectionSideBarMenuList(){this._reportServices.getReportCollectionSidebarMenuList().subscribe(e=>{console.log("",e),e.Status.toLowerCase()==="success"&&e.noofREcords&&(this.reportCollectionSidebarMenuList=[],this.reportCollectionSidebarMenuList=e.dataSet.Table,this.reportCollectionSidebarMenuList.forEach(i=>{i.ListParam.length&&(i.ListParam=JSON.parse(i.ListParam))}))},e=>{console.error(e)})}setSelectedMenuSubMenuList(e){debugger;this.selectedMenu=new E(""),this.selectedMenu=e,this.showSubMenuOptionByMenu()}setSelectedSubMenuDetail(e){debugger;this.selectedSubMenu=new R,this.selectedSubMenu=e,this.showMicroMenuOptionByMenu()}setSelectedMicroMenuDetail(e){debugger;this.selectedMicroMenu=new I,this.selectedMicroMenu=e,this.showMicroTypeMenuOptionByMenu()}setSelectedMicroTypeMenuDetail(e){debugger;this.selectedMicroTypeMenu=new U,this.selectedMicroTypeMenu=e,this.showQueryOptionBySubMenu()}showList(){this.isMenuShow=!0,this.isSubMenuShow=!1,this.isQueryShow=!1,this.isAddUpdateMenu=!1,this.isAddUpdateSubMenu=!1,this.isDirectAddSubMenu=!1}check_IsUserAdded(e){let i=!1;if(this.addMicroSubMenuTypeDetail.userAccessList.length&&e.toString()){let n=!1;for(let l=0;l<this.addMicroSubMenuTypeDetail.userAccessList.length;l++)this.addMicroSubMenuTypeDetail.userAccessList[l]===e&&(n=!0);i=n}return i}addDeleteUserAccess(e,i){if(i)this.addMicroSubMenuTypeDetail.userAccessList.push(e);else if(this.addMicroSubMenuTypeDetail.userAccessList.length){let n="";for(let l=0;l<this.addMicroSubMenuTypeDetail.userAccessList.length;l++)this.addMicroSubMenuTypeDetail.userAccessList[l]===e&&(n=l.toString());n&&this.addMicroSubMenuTypeDetail.userAccessList.splice(Number(n),1)}}setSubMenuList(){}setMicroMenuList(){}setMicroMenuTypeList(){}static{this.\u0275fac=function(i){return new(i||t)(D(Y),D(ge))}}static{this.\u0275cmp=W({type:t,selectors:[["app-report-collection-settings"]],decls:24,vars:7,consts:[["userAccessCheckboxAll",""],["userAccessCheckbox",""],[1,"d-flex","flex-column","gap-1",2,"min-height","60% !important"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-row","gap-1"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-nowrap","d-flex","align-items-center","gap-2"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-secondary"],[1,"bi","bi-node-plus-fill"],[1,"d-flex","flex-wrap","gap-2","p-2","justify-content-start"],[4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"bi","bi-arrow-left"],[4,"ngFor","ngForOf"],[1,"menu","shadow-lg",3,"click"],[1,"d-flex","flex-column","gap-2","w-100"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],["type","button",1,"btn","btn-success","shadow-lg",3,"click"],[1,"text-nowrap"],["name","","id","","rows","15",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","flex-row","gap-2","w-100"],[1,"card","border-0","rounded-0","p-2","shadow-lg","d-flex","flex-column","gap-2","w-50",2,"min-height","60vh"],[1,"d-flex","flex-row","gap-2"],["name","","id","",1,"form-select","form-select-sm"],["value",""],[1,"card","border-0","rounded-0","p-2","shadow-lg","d-flex","flex-column","w-50"],[1,"d-flex","flex-column","gap-2"],["class","d-flex justify-content-center p-3 bg-indigo-200 text-white border-1 border-indigo-900 rounded-5 shadow-lg",4,"ngIf"],[1,"d-flex","justify-content-center","p-3","bg-indigo-200","text-white","border-1","border-indigo-900","rounded-5","shadow-lg"],[1,"table","table-sm"],[1,"text-center"],["style","color: green;","class","bi bi-check-circle-fill",4,"ngIf"],["style","color: red;","class","bi bi-x-circle-fill",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-warning","rounded-5"],[1,"bi","bi-pencil-square"],["type","button",1,"btn","btn-sm","btn-danger","rounded-5"],[1,"bi","bi-check-circle-fill",2,"color","green"],[1,"bi","bi-x-circle-fill",2,"color","red"],[1,"d-flex","flex-row","gap-3"],[1,"d-flex","flex-column"],[1,"d-flex","flex-row","justify-content-between"],["type","button","class","btn btn-sm rounded-5 btn-success text-nowrap",3,"click",4,"ngIf"],["type","text","class","form-control","placeholder","Enter menu name here...",3,"ngModel","ngModelChange",4,"ngIf"],["name","","id","","class","form-select",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","gap-2"],["type","button",1,"btn","btn-sm","rounded-5","btn-success","text-nowrap",3,"click"],["type","text","placeholder","Enter menu name here...",1,"form-control",3,"ngModelChange","ngModel"],["name","","id","",1,"form-select",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click"],["type","text","placeholder","Enter sub nemu name here...",1,"form-control",3,"ngModelChange","ngModel"],["type","button","class","btn btn-success text-nowrap",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","text-nowrap",3,"click"],["type","text","placeholder","Enter sub nemu name here...",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"dropdown","w-100"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","bg-transparent","border-1","border-secondary","dropdown-toggle","w-100",3,"disabled"],["class","dropdown-menu","style","overflow-y: auto; max-height: 30dvh;",4,"ngIf"],["for","",4,"ngIf"],[1,"dropdown-menu",2,"overflow-y","auto","max-height","30dvh"],[1,"hover-effect","p-2","d-flex","flex-row","gap-2",3,"click"],["type","checkbox","role","checkbox","name","","id","",3,"click","checked"],["class","hover-effect p-2 d-flex flex-row gap-2",3,"click",4,"ngFor","ngForOf"],["for",""],[2,"color","red"],[1,"d-flex","flex-column","gap-1"],["style","color: red;",4,"ngIf"],["name","","id","","rows","14","placeholder","Provide query to perform...",1,"form-control",3,"ngModelChange","disabled","ngModel"]],template:function(i,n){i&1&&(r(0,"div",2)(1,"div",3)(2,"div",4),m(3,ve,3,0,"button",5),r(4,"button",6),f("click",function(){return n.showList()}),r(5,"strong",7),g(6,"i",8),u(7," List"),o()()(),r(8,"div",4)(9,"button",6),f("click",function(){return n.showAddUpdateMenu()}),r(10,"strong",7),g(11,"i",8),u(12," Add Menu"),o()(),r(13,"button",9)(14,"strong",7),g(15,"i",10),u(16," Add Sub Menu"),o()()()(),r(17,"div",11),m(18,Le,2,1,"ng-container",12)(19,Ee,2,1,"ng-container",12)(20,Ie,2,1,"ng-container",12)(21,Ae,2,1,"ng-container",12)(22,Ne,12,2,"ng-container",12),o(),m(23,ot,24,3,"ng-container",12),o()),i&2&&(a(3),s("ngIf",!n.isMenuShow),a(15),s("ngIf",n.showingMenuName.toLowerCase().trim()==="menu"),a(),s("ngIf",n.showingMenuName.toLowerCase().trim()==="submenu"),a(),s("ngIf",n.showingMenuName.toLowerCase().trim()==="micromenu"),a(),s("ngIf",n.showingMenuName.toLowerCase().trim()==="microtypemenu"),a(),s("ngIf",n.showingMenuName.toLowerCase().trim()==="query"),a(),s("ngIf",n.isAddUpdateMenu||n.isAddUpdateSubMenu||n.isDirectAddSubMenu))},dependencies:[Q,q,F,me,Z,K,z,$,he,J,H,fe,X],styles:[".menu[_ngcontent-%COMP%]{padding:2%;background-color:#87a2ff;color:#fff;font-weight:600;width:49%;font-size:2rem;text-align:center;border-radius:10px}.hover-effect[_ngcontent-%COMP%]:hover{background-color:var(--site-color-level-5);color:var(--site-color-level-1);cursor:pointer;transition:.3s ease-in-out}"]})}}return t})();function rt(t,c){if(t&1&&(r(0,"option",25),u(1),o()),t&2){let e=c.$implicit;ue("value",e.columnValue),a(),v("",e.columnName," ")}}function lt(t,c){if(t&1&&(r(0,"div",9)(1,"small")(2,"strong"),u(3,"Filter Column"),o()(),r(4,"select",23),m(5,rt,2,2,"option",24),o()()),t&2){let e=d(2);a(5),s("ngForOf",e.filterColumnNameList)}}function at(t,c){if(t&1&&(r(0,"th"),u(1),o()),t&2){let e=c.$implicit;a(),L(e.key)}}function st(t,c){if(t&1&&(S(0),r(1,"td"),u(2),o(),M()),t&2){let e=c.$implicit;a(2),L(e.value)}}function ct(t,c){if(t&1&&(r(0,"tr"),m(1,st,3,1,"ng-container",29),P(2,"keyvalue"),o()),t&2){let e=c.$implicit;a(),s("ngForOf",V(2,1,e))}}function ut(t,c){if(t&1&&(r(0,"div",26)(1,"table",27)(2,"thead",28)(3,"tr"),m(4,at,2,1,"th",29),P(5,"keyvalue"),o()(),r(6,"tbody"),m(7,ct,3,3,"tr",29),o()()()),t&2){let e=d(2);a(4),s("ngForOf",V(5,2,e.reportItemList[0])),a(3),s("ngForOf",e.reportItemList)}}function dt(t,c){if(t&1){let e=h();S(0),r(1,"div",1)(2,"div",2)(3,"div",3),g(4,"p-panelMenu",4),o(),r(5,"div",5),g(6,"p-panelMenu",4),o(),r(7,"div",5),g(8,"p-panelMenu",4),o()(),r(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"small")(14,"strong"),u(15,"From"),o()(),r(16,"input",10),w("ngModelChange",function(n){p(e);let l=d();return y(l.fromDate,n)||(l.fromDate=n),_(n)}),o()(),r(17,"div",9)(18,"small")(19,"strong"),u(20,"To"),o()(),r(21,"input",10),w("ngModelChange",function(n){p(e);let l=d();return y(l.toDate,n)||(l.toDate=n),_(n)}),o()(),r(22,"div",11)(23,"button",12),f("click",function(){p(e);let n=d();return _(n.loadReportCollectionBySelectedSubMenuQuery())}),r(24,"strong"),u(25,"Search"),o()()()(),r(26,"div",8),m(27,lt,6,1,"div",13),o(),r(28,"div",8)(29,"div",14)(30,"button",15)(31,"strong"),g(32,"i",16),u(33," Download"),o()()(),r(34,"div",14)(35,"button",15)(36,"strong"),g(37,"i",17),u(38," Export"),o()()(),r(39,"div",14)(40,"button",18)(41,"strong"),g(42,"i",19),u(43," Print"),o()()(),r(44,"div",14)(45,"button",20),f("click",function(){p(e);let n=d();return _(n.showReportCollectionSettingComponent())}),r(46,"strong"),g(47,"i",21),o()()()()(),m(48,ut,8,4,"div",22),o()(),M()}if(t&2){let e=d();a(4),s("model",e.items),a(2),s("model",e.items1),a(2),s("model",e.items2),a(8),x("ngModel",e.fromDate),a(5),x("ngModel",e.toDate),a(6),s("ngIf",e.filterColumnNameList.length),a(21),s("ngIf",e.reportItemList.length)}}function mt(t,c){if(t&1&&(S(0),r(1,"div",30)(2,"div",31),g(3,"img",32),r(4,"h6"),u(5,"Feature is in development"),o(),r(6,"strong",33),u(7,"Comming Soon!"),o()()(),M()),t&2){let e=d();a(3),s("src",e.commingSoon,ce)}}var oe=class{constructor(){this.columnName="",this.columnKey=""}};var re=class{constructor(){this.columnName="",this.columnValue=""}},Tt=(()=>{class t{constructor(e,i,n){this._reportServices=e,this._commonServices=i,this._dialogService=n,this.items=[],this.items1=[],this.items2=[],this.loading=!0,this.activityValues=[0,100],this.reportItemList=[],this.commingSoon="assets/images/app-development.png",this.value=null,this.mainSection="",this.subSection="",this.fromDate="",this.toDate="",this.currentCommand=null,this.reportColumnNameList=[],this.reportCollectionSidebarMenuList=[],this.selectedSubMenuQuery="",this.filterColumnNameList=[]}ngOnInit(){this.items=[{label:"IPD",icon:"pi pi-file",items:[{label:"Register",icon:"pi pi-file"},{label:"Discharge Register",icon:"pi pi-image"},{label:"Cash Collection",icon:"pi pi-image"},{label:"Cash Deleted",icon:"pi pi-image"}]},{label:"OPD",icon:"pi pi-cloud",items:[{label:"Register",icon:"pi pi-file"},{label:"OPD Card",icon:"pi pi-image"},{label:"Cash Collection",icon:"pi pi-image"},{label:"Cash Deleted",icon:"pi pi-image"}]},{label:"Pathalogy",icon:"pi pi-desktop",items:[{label:"Register",icon:"pi pi-file"},{label:"Cash Received",icon:"pi pi-image"},{label:"Cash Deleted",icon:"pi pi-image"}]}],this.loadReportCollectionSideBarMenuList()}showReportCollectionSettingComponent(){let e=this._dialogService.open(Ce,{header:"Report Collection Settings",width:"60%",height:"80%"})}showCommingSoonBanner(){setTimeout(()=>{this.commingSoon.toLowerCase().includes("app-development")?this.commingSoon="assets/images/coming-soon.png":this.commingSoon="assets/images/app-development.png",this.showCommingSoonBanner()},2e3)}setMainSectionSubSection(e,i){this.mainSection=e,this.subSection=i,this.commandFunBasedonMainSectionSubSection()}commandFunBasedonMainSectionSubSection(){if(this.mainSection.toLowerCase()==="patientreport"&&this.subSection.toLowerCase()==="admittedipd"){this.currentCommand=this.patientIPDAdmittedReport;let e=this._commonServices.generateMonthWiseDate();this.fromDate=e[0]||"",this.toDate=e[e.length-1]||"",this.fromDate&&this.toDate?this.patientIPDAdmittedReport():alert("Please try again!")}if(this.mainSection.toLowerCase()==="patientreport"&&this.subSection.toLowerCase()==="checkupopd"){this.currentCommand=this.patientIPDAdmittedReport;let e=this._commonServices.generateMonthWiseDate();this.fromDate=e[0]||"",this.toDate=e[e.length-1]||"",this.fromDate&&this.toDate?this.patientCheckupOpdReport():alert("Please try again!")}}sortReportColumnName(){debugger;if(this.reportItemList.length){this.reportColumnNameList=[];let e=Object.keys(this.reportItemList[0]);console.log(e),e.length&&e.forEach(i=>{let n=new oe;n.columnName=i,n.columnKey=i})}}patientIPDAdmittedReport(){console.log("Event Hit"),console.log(this.fromDate),console.log(this.toDate),this._reportServices.getIpdAdmittedPatientList(this.fromDate,this.toDate).subscribe(e=>{console.log(e),e.Status.toLowerCase()==="success"&&e.noofREcords&&(this.reportItemList=e.dataSet.Table,this.sortReportColumnName())},e=>{console.error(e)})}patientCheckupOpdReport(){console.log("Event Hit"),console.log(this.fromDate),console.log(this.toDate),this._reportServices.getOpdAdmittedPatientList(this.fromDate,this.toDate).subscribe(e=>{console.log(e)},e=>{console.error(e)})}loadReportCollectionSideBarMenuList(){this._reportServices.getReportCollectionSidebarMenuList().subscribe(e=>{if(console.log("",e),e.Status.toLowerCase()==="success"&&e.noofREcords){debugger;this.reportCollectionSidebarMenuList=[],this.reportCollectionSidebarMenuList=e.dataSet.Table,this.reportCollectionSidebarMenuList.forEach(i=>{i.ListParam.length&&(i.ListParam=JSON.parse(i.ListParam))}),this.setSidebarItems()}},e=>{console.error(e)})}setSidebarItems(){if(this.reportCollectionSidebarMenuList.length){this.items=[];for(let e=0;e<this.reportCollectionSidebarMenuList.length;e++){let i=this.reportCollectionSidebarMenuList[e],n=[];if(n.label=i.ListItem,i.ListParam.length){let l=[];for(let C=0;C<i.ListParam.length;C++){let A=[],T=i.ListParam[C];if(A.label=T.subMenuName,T.subMenuArray.length){let le=[];for(let ee=0;ee<T.subMenuArray.length;ee++){let te=[],O=T.subMenuArray[ee];if(O.subMenuArray.length){te.label=O.subMenuName;let ae=[];for(let ne=0;ne<O.subMenuArray.length;ne++){let N=[],B=O.subMenuArray[ne];N.label=B.microMenuName,N.queryParams={query:B.microMenuQuery},N.command=()=>this.setQuery(B.microMenuQuery),N.queryParams=B.userAccessList,ae.push(N)}te.items=ae,le.push(te)}}A.items=le,l.push(A)}}n.items=l}this.items.push(n)}}}setQuery(e){debugger;if(this.selectedSubMenuQuery=e,!this.fromDate&&!this.toDate){let i=this._commonServices.generateMonthWiseDate();this.fromDate=i[0]||"",this.toDate=i[i.length-1]||""}this.loadReportCollectionBySelectedSubMenuQuery()}loadReportCollectionBySelectedSubMenuQuery(){let e=this.selectedSubMenuQuery;e=e.replace("[FromDate]",this.fromDate.toString()),e=e.replace("[ToDate]",this.toDate.toString()),console.log(e),this._reportServices.getReportCollectionByQuery(e).subscribe(i=>{console.log(i),i.Status.toLowerCase().includes("success")&&i.noofREcords&&(this.reportItemList=[],this.reportItemList=i.dataSet.Table,this.sortColumnName())},i=>{console.error(i)})}sortColumnName(){if(this.reportItemList.length){let e=Object.keys(this.reportItemList[0]);if(e.length)for(let i=0;i<e.length;i++){let n=this.splitByUppercase(e[i]),l=new re;n.length&&(n=this.setNewUppercaseSplitedArray(n),l.columnName=this.getColumnName_WithSpaceInBetweenWords(n),l.columnValue=e[i],this.filterColumnNameList.push(l))}console.log(this.filterColumnNameList)}}getColumnName_WithSpaceInBetweenWords(e){let i="";if(e.length){let n="";for(let l=0;l<e.length;l++)n=n+" "+e[l];n.length&&(i=n.trim())}return i}setNewUppercaseSplitedArray(e){let i=[];debugger;if(e.length){let n="",l=[];for(let C=0;C<e.length;C++)e[C].length===1&&(n=n+e[C]),e[C].length>1&&(n.length>0&&(l.push(n),n=""),l.push(e[C]));l.length&&(i=l)}return i}splitByUppercase(e){return e.split(/(?=[A-Z])/)}checkLetterCase_IsInUpperCase(e){return e===e.toUpperCase()}checkLetterCase_IsInLowerCase(e){return e===e.toLowerCase()}validPlatform(e){return this._commonServices.checkPlatform(e)}static{this.\u0275fac=function(i){return new(i||t)(D(Y),D(j),D(G))}}static{this.\u0275cmp=W({type:t,selectors:[["app-report-collection"]],features:[de([G])],decls:2,vars:2,consts:[[4,"ngIf"],[1,"d-flex","flex-row"],[1,"d-flex","flex-column","p-2",2,"width","20%"],[1,"mt-1"],["styleClass","w-full md:w-20rem",3,"model"],[1,"mt-4"],[1,"d-flex","flex-column",2,"width","80%"],[1,"d-flex","flex-row","justify-content-between","p-2","w-100"],[1,"d-flex","flex-row","align-items-end","gap-1"],[1,"d-flex","flex-column"],["type","date","name","","id","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"d-flex","flex-column","align-items-end"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],["class","d-flex flex-column",4,"ngIf"],[1,""],["type","button",1,"btn","btn-sm","shadow-lg","btn-success"],[1,"bi","bi-download"],[1,"bi","bi-file-arrow-up-fill"],["type","button",1,"btn","btn-sm","shadow-lg","btn-info"],[1,"bi","bi-printer-fill"],["type","button",1,"btn","btn-sm","shadow-lg","btn-secondary",3,"click"],[1,"bi","bi-gear-fill"],["class","overflow-auto","style","max-height: 85dvh;",4,"ngIf"],["name","","id","",1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"overflow-auto",2,"max-height","85dvh"],[1,"table","position-relative"],[2,"position","sticky","top","0"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"height","80dvh"],[1,"text-center"],["height","100px","alt","","srcset","",3,"src"],[2,"color","red"]],template:function(i,n){i&1&&m(0,dt,49,7,"ng-container",0)(1,mt,8,1,"ng-container",0),i&2&&(s("ngIf",n.validPlatform("mac")||n.validPlatform("window")),a(),s("ngIf",!1))},dependencies:[Q,q,F,pe,X,Me,Z,K,z,$,J,H],styles:["[_nghost-%COMP%]     .p-panelmenu .p-panelmenu-header .p-panelmenu-header-content .p-panelmenu-header-action{padding:.5rem}[_nghost-%COMP%]   [_ngcontent-%COMP%]:ng-deep   input[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]{padding:.4rem!important}[_nghost-%COMP%]     .p-panelmenu .p-panelmenu-content .p-panelmenu-root-list{padding-left:0rem!important}"]})}}return t})();export{Tt as ReportCollectionComponent};
